<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>How to Use Pulsar SQL Effectively - Pulsar Neighborhood</title>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This article explores how Pulsar SQL queries data and the components involved. It also walks through an SQL query example."><meta property="og:title" content="How to Use Pulsar SQL Effectively - Pulsar Neighborhood"><meta property="og:type" content="article"><meta property="og:url" content="https://www.pulsar-neighborhood.io/articles/how-to-use-pulsar-sql-effectively/"><meta property="og:image" content="https://user-images.githubusercontent.com/16946028/193617964-d3d6ebc3-090c-47a2-ad10-d96a41af6838.png"><meta name=description content="This article explores how Pulsar SQL queries data and the components involved. It also walks through an SQL query example."><meta name=twitter:site content="@pulsar_neighbor"><meta name=twitter:creator content="@pulsar_neighbor"><link rel=alternate type=application/rss+xml href=/index.xml title="Site Title"><meta name=google-site-verification content="m-1Z-0k0EvG9PD7R24pKuETSaBpEvqoXgOYT-0MtuPU"><link rel=icon href=https://www.pulsar-neighborhood.io/favicon.png><link rel=canonical href=https://www.pulsar-neighborhood.io/articles/how-to-use-pulsar-sql-effectively/><link rel=stylesheet href=/css/style.32ad96ee983b063b549f59db931afb8f0db25424bf2d687e1122748a7d183f73.css><style>.ctct-form-defaults{padding:15px!important}</style><script type=application/ld+json>[{"@context":"http://schema.org","@type":"WebPage","name":"Pulsar Neighborhood - How to Use Pulsar SQL Effectively","description":"This article explores how Pulsar SQL queries data and the components involved. It also walks through an SQL query example.","publisher":{"@type":"Organization","name":"Pulsar Neighborhood"}},{"@context":"http://schema.org","@type":"BlogPosting","image":"https://user-images.githubusercontent.com/16946028/193617964-d3d6ebc3-090c-47a2-ad10-d96a41af6838.png","url":"https:\/\/www.pulsar-neighborhood.io\/articles\/how-to-use-pulsar-sql-effectively\/","publisher":"Pulsar Neighborhood","headline":"How to Use Pulsar SQL Effectively","dateCreated":"2022-10-03 11:38:50 -0400 -0400","datePublished":"2022-10-03 11:38:50 -0400 -0400","dateModified":"2022-10-03 11:38:50 -0400 -0400","inLanguage":"en-US","isFamilyFriendly":"true","copyrightYear":"2022","copyrightHolder":"","author":{"@type":"Person","name":"Pulsar Neighborhood","url":"https://www.pulsar-neighborhood.io"},"mainEntityOfPage":"True","articleSection":["pulsar-components, use-cases"],"articleBody":"\u003cp\u003eApache Pulsar is a distributed messaging and streaming platform created and open-sourced by Yahoo. Its effectiveness has seen it applied beyond pub\/sub messaging — all the way to scalable storage. As a result, developers began to see the potential of Pulsar for faster retrieval of real-time data.\u003c\/p\u003e\n\u003cp\u003eThe best way to achieve this is to query data as it arrives rather than when it is in a stored system, such as a database. The faster retrieval of real-time data is the need that led to the development of \u003ca href=\u0022https:\/\/pulsar.apache.org\/docs\/sql-overview\u0022 target=\u0022_blank\u0022\u003ePulsar SQL\u003c\/a\u003e.\u003c\/p\u003e\n\u003cp\u003eThis article explores how Pulsar SQL queries data and the components involved. It also walks through an SQL query example.\u003c\/p\u003e\n\u003ch2 id=\u0022making-the-most-of-pulsar-sql\u0022\u003eMaking the Most of Pulsar SQL\u003c\/h2\u003e\n\u003cp\u003ePulsar SQL is a query layer that sits on top of Apache Pulsar and enables users to query structured data streams stored inside Pulsar. This includes live incoming streams and older stored streams.\u003c\/p\u003e\n\u003cp\u003eThe Pulsar SQL layer relies on \u003ca href=\u0022https:\/\/trino.io\/\u0022 target=\u0022_blank\u0022\u003eTrino\u003c\/a\u003e — a fast, distributed SQL query engine — to query event streams. This querying process occurs in a \u003ca href=\u0022https:\/\/prestodb.io\/\u0022 target=\u0022_blank\u0022\u003ePresto\u003c\/a\u003e cluster. Presto is a distributed system that runs a cluster of machines, with each cluster containing a coordinator and multiple workers. Presto workers use the Pulsar Presto connector to access the Pulsar event streams stored in an \u003ca href=\u0022https:\/\/bookkeeper.apache.org\/\u0022 target=\u0022_blank\u0022\u003eApache Bookkeeper\u003c\/a\u003e node called a bookie.\u003c\/p\u003e\n\u003ch3 id=\u0022use-case\u0022\u003eUse Case\u003c\/h3\u003e\n\u003cp\u003ePulsar querying can be instrumental in cases that require real-time analytics. For instance, consider an eCommerce website that recommends products to its users. In such a case, a query can provide real-time feedback when the customer purchases to ensure that their recommendations list is updated accordingly. This might then entail recommending complementary products and removing similar products from the recommendation list.\u003c\/p\u003e\n\u003ch4 id=\u0022pulsars-storage-layer\u0022\u003ePulsar’s Storage Layer\u003c\/h4\u003e\n\u003cp\u003ePulsar uses brokers to organize the messages that producers publish, then store them as segments in \u003ca href=\u0022https:\/\/bookkeeper.apache.org\/\u0022 target=\u0022_blank\u0022\u003eApache Bookkeeper\u003c\/a\u003e — a scalable and low latency storage service for real-time workloads. Its features make it an ideal solution for Pulsar’s persistent message storage needs. Each of the topics received is replicated to a bookie, guaranteeing that messages the broker receives will be delivered to the intended consumer.\u003c\/p\u003e\n\u003cp\u003eThe replication of messages ensures they are durable and available in two or more servers with mirrored redundant arrays of independent disk (RAID) volumes.\u003c\/p\u003e\n\u003cp\u003eConsider the eCommerce example in the previous section. When you click to view an item, an event is triggered. Then, a different event begins when you click to purchase the item. A broker then receives these generated event streams and organizes them based on the topic. They are then replicated and stored in bookies before being processed as database updates.\u003c\/p\u003e\n\u003cp\u003eHowever, to enhance the user experience and encourage more customer engagement, it’s crucial to populate the webpage with relevant, meaningful recommendations as quickly as possible. That’s where Pulsar SQL comes in. By reading the viewing and purchasing event streams directly from bookies, Pulsar provides the system’s recommender code with the necessary information to create new recommendations before the user has left the site.\u003c\/p\u003e\n\u003ch4 id=\u0022querying-versus-streaming-and-messaging-in-apache-pulsar\u0022\u003eQuerying Versus Streaming and Messaging in Apache Pulsar\u003c\/h4\u003e\n\u003cp\u003eLet’s start by understanding an event. An event is a data point generated by a system or producer after a specific occurrence. Streaming and messaging in Pulsar involves the continuous creation of those data points. The data generated by producers must follow a structure defined by a schema and enforced by Pulsar’s registry. A broker forwards that data to the Bookkeeper to store as segments, which are then organized based on topics. The broker replicates those segments before temporarily storing them in the bookies.\u003c\/p\u003e\n\u003cp\u003eOrganizing the received data streams into topics makes it easier for \u003ca href=\u0022https:\/\/pulsar.apache.org\/docs\/concepts-messaging\/#consumers\u0022 target=\u0022_blank\u0022\u003econsumers\u003c\/a\u003e to read data through a broker. However, this process is not as fast because the broker must first authenticate the consumer’s request and verify the schema.\u003c\/p\u003e\n\u003cp\u003eIn contrast, querying in Pulsar involves reading the data streams directly from the bookies. This is possible because the data streams in the bookies follow the structure specified by the schema.\u003c\/p\u003e\n\u003cp\u003eThe difference between message consumption and querying is that the latter doesn’t care about sequence — it is only interested in reading the event streams. Pulsar SQL reads event streams as soon as the bookie receives the stream segments.\u003c\/p\u003e\n\u003cp\u003eThe Consumer API handles message consumption, designed for the pub\/sub model, and is ineffective in reading data in bulk. It also requires the data to be organized in topics and ordered in a prescribed manner.\u003c\/p\u003e\n\u003ch3 id=\u0022pulsar-sql-in-action\u0022\u003ePulsar SQL in Action\u003c\/h3\u003e\n\u003cp\u003eIn this section, you run a local Pulsar cluster in standalone mode using Docker Desktop. First, ensure you have Docker Desktop installed. If you don’t, \u003ca href=\u0022https:\/\/docs.docker.com\/desktop\/\u0022 target=\u0022_blank\u0022\u003edownload it here\u003c\/a\u003e and follow the installation instructions.\u003c\/p\u003e\n\u003cp\u003eOnce you’re set-up, start the Pulsar Cluster in Standalone mode in a Docker container by executing the following command in the terminal:\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-0-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-0-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003edocker run -it -p 6650:6650 -p 8080:8080 --mount source\u003cspan style=\u0022color:#f92672\u0022\u003e=\u003c\/span\u003epulsardata,target\u003cspan style=\u0022color:#f92672\u0022\u003e=\u003c\/span\u003e\/pulsar\/data --mount source\u003cspan style=\u0022color:#f92672\u0022\u003e=\u003c\/span\u003epulsarconf,target\u003cspan style=\u0022color:#f92672\u0022\u003e=\u003c\/span\u003e\/pulsar\/conf apachepulsar\/pulsar:2.10.1 bin\/pulsar standalone\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eNote:\u003c\/p\u003e\n\u003cul\u003e\n\u003cli\u003eFor Windows, configure Docker Desktop to use Linux Containers.\u003c\/li\u003e\n\u003cli\u003eFor macOS, add the \u003ccode\u003e--platform=linux\/amd64\u003c\/code\u003e flag to specify the architecture and OS.\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cp\u003eWait for the Pulsar standalone container build to complete before proceeding. You can verify that the container has been created by running this command on a new terminal:\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-1-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-1-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003edocker ps\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eMake a note of the container ID because you use it in the next step.\u003c\/p\u003e\n\u003cp\u003eTo execute the commands for this project inside the Pulsar container you just created, connect to the container using this command:\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-2-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-2-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003edocker exec -it \u0026lt;CONTAINER ID\u0026gt; \/bin\/bash\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003e(Replace \u003ccode\u003e\u0026lt;CONTAINER ID\u0026gt;\u003c\/code\u003e with the ID you noted in the previous step.)\u003c\/p\u003e\n\u003cp\u003eYou now have a running Pulsar cluster. This cluster s what you use to execute Pulsar SQL queries. But first, you must start a Pulsar worker on the Pulsar standalone container you just created:\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e.\/bin\/pulsar sql-worker run\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eNote that this command only works after the Pulsar standalone container build is complete.\u003c\/p\u003e\n\u003cp\u003eNow you can start using the SQL command-line interface (CLI). Initiate it by executing the command below:\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-4-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-4-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e.\/bin\/pulsar sql\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eIf this is successful, your terminal should change and start with \u003ccode\u003epresto\u0026gt;\u003c\/code\u003e.\u003c\/p\u003e\n\u003cp\u003eYou can test the SQL capabilities by executing a few queries.\u003c\/p\u003e\n\u003cul\u003e\n\u003cli\u003eCheck the catalogs:\u003ccode\u003eshow catalogs;\u003c\/code\u003e\u003c\/li\u003e\n\u003cli\u003eCheck the schemas: \u003ccode\u003eshow schemas in pulsar;\u003c\/code\u003e\u003c\/li\u003e\n\u003cli\u003eCheck the tables available with \u003ccode\u003eshow tables in pulsar.\u0026quot;public\/default\u0026quot;;\u003c\/code\u003e\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cp\u003eNow create some mock data that you can query. To create the mock data, you need a built-in connector called \u003ccode\u003eDataGeneratorSource\u003c\/code\u003e.\u003c\/p\u003e\n\u003cp\u003eFirst, type “Q” in the terminal to quit the SQL CLI and return to the container terminal. Start by downloading the necessary connector using \u003ccode\u003eCURL\u003c\/code\u003e:\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-5-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-5-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003ecurl -LO https:\/\/archive.apache.org\/dist\/pulsar\/pulsar-2.10.0\/connectors\/pulsar-io-data-generator-2.10.0.nar\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eCreate a directory and name it \u003ccode\u003econnectors\u003c\/code\u003e:\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-6-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-6-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003emkdir connectors\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eThen, move the \u003ccode\u003edata-generator\u003c\/code\u003e connector to the \u003ccode\u003econnectors\u003c\/code\u003e directory.\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-7-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-7-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003emv  pulsar-io-data-generator-2.10.0.nar connectors\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eReload the connector to complete its installation:\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-8-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-8-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e.\/bin\/pulsar-admin sources available-sources\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eVerify that the installed connector is ready for use:\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-9-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-9-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e.\/bin\/pulsar-admin sources available-sources\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eYou should get a list of all installed connectors, including the \u003ccode\u003epulsar-io-data-generator-2.10.0.nar\u003c\/code\u003e. The output should look like this:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/193617317-52aed41d-b1c3-436a-97c7-2575056596ef.jpg\u0022 alt=\u0022image2\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eLast, create the mock data.\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-10-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-10-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e.\/bin\/pulsar-admin sources create --name generator --destinationTopicName generator_test --source-type data-generator\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eThe command above creates the topic \u003ccode\u003egenerator_test\u003c\/code\u003e in the \u003ccode\u003epublic\/default\u003c\/code\u003e namespace using the \u003ccode\u003edata-generator\u003c\/code\u003e connector.\u003c\/p\u003e\n\u003ch4 id=\u0022querying-data-using-sql\u0022\u003eQuerying Data Using SQL\u003c\/h4\u003e\n\u003cp\u003eStart by going back to the SQL CLI using this command:\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-11-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-11-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e.\/bin\/pulsar sql\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eNow, you can query a topic in the namespace \u003ccode\u003e\u0026quot;public\/default.\u0026quot;\u003c\/code\u003e\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-12-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-12-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-sql\u0022 data-lang=\u0022sql\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#66d9ef\u0022\u003eshow\u003c\/span\u003e tables \u003cspan style=\u0022color:#66d9ef\u0022\u003ein\u003c\/span\u003e pulsar.\u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;public\/default\u0026#34;\u003c\/span\u003e;\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eIf successful, the output should look like this:\u003c\/p\u003e\n\u003cpre tabindex=\u00220\u0022\u003e\u003ccode class=\u0022language-log\u0022 data-lang=\u0022log\u0022\u003e   Table     \n----------------\ngenerator_test\n(1 row)\n\nQuery 20180829_213202_00000_csyeu, FINISHED, 1 node\nSplits: 19 total, 19 done (100.00%)\n0:02 [1 rows, 38B] [0 rows\/s, 17B\/s]\n\u003c\/code\u003e\u003c\/pre\u003e\u003cp\u003eNow query the data from the topic \u003ccode\u003egenerator_test\u003c\/code\u003e.\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-14-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-14-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-sql\u0022 data-lang=\u0022sql\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#66d9ef\u0022\u003eselect\u003c\/span\u003e \u003cspan style=\u0022color:#f92672\u0022\u003e*\u003c\/span\u003e \u003cspan style=\u0022color:#66d9ef\u0022\u003efrom\u003c\/span\u003e pulsar.\u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;public\/default\u0026#34;\u003c\/span\u003e.generator_test;\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eYou should see the data arriving as it is generated:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/193617424-00bae3e5-e78e-4be4-9f50-b843c82c6d72.png\u0022 alt=\u0022image1\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eTo quit the stream, enter the letter \u003cstrong\u003eq\u003c\/strong\u003e in the terminal.\u003c\/p\u003e\n\u003cp\u003eYou can also create a custom query that filters the data you want. ou should base the custom query you create here on your project\u0026rsquo;s generated data.\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-15-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-15-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-sql\u0022 data-lang=\u0022sql\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#66d9ef\u0022\u003eselect\u003c\/span\u003e address \u003cspan style=\u0022color:#66d9ef\u0022\u003efrom\u003c\/span\u003e pulsar.\u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;public\/default\u0026#34;\u003c\/span\u003e.generator_test \u003cspan style=\u0022color:#66d9ef\u0022\u003eWHERE\u003c\/span\u003e age \u003cspan style=\u0022color:#f92672\u0022\u003e\u0026gt;\u003c\/span\u003e \u003cspan style=\u0022color:#ae81ff\u0022\u003e50\u003c\/span\u003e;\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eThe output is:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/193617451-4443ed9d-3896-47cb-bb51-3cea724d3252.jpg\u0022 alt=\u0022image3\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eYou can make most of the queries with regular SQL while using Pulsar SQL. For instance, you can use: \u003ccode\u003eAND, AT, EXCEPT, FETCH, GROUP, HAVING, INTERSECT, LIMIT, OFFSET, OR, ORDER, and UNION\u003c\/code\u003e.\u003c\/p\u003e\n\u003cp\u003eIn the example above, you successfully queried structured data streams. The response was structured and in line with the query executed.\u003c\/p\u003e\n\u003ch3 id=\u0022using-the-presto-java-database-connectivity-driver\u0022\u003eUsing the Presto Java Database Connectivity Driver\u003c\/h3\u003e\n\u003cp\u003eYou can also access Presto via the \u003ca href=\u0022https:\/\/prestodb.io\/docs\/current\/installation\/jdbc.html\u0022 target=\u0022_blank\u0022\u003ePresto Java Database Connectivity (JDBC) driver\u003c\/a\u003e. Java applications can use the Presto JDBC driver to access and perform operations on structured data using query methods such as \u003ccode\u003eCREATE\u003c\/code\u003e, \u003ccode\u003eDELETE\u003c\/code\u003e, \u003ccode\u003eUPDATE\u003c\/code\u003e, and \u003ccode\u003eINSERT\u003c\/code\u003e, among others. With the Presto JDBC driver, you can query topics from clusters that organize structured data in topics. This powerful tool allows you to create complex queries at scale.\u003c\/p\u003e\n\u003cp\u003eThe JDBC driver provides a powerful suite of tools for managing Pulsar SQL directly from Java applications. While the Presto shell provides a direct method of working with SQL in Pulsar, the JDBC driver is a go-to solution for creating Java applications that incorporate Pulsar SQL and allows for more complex integrations of Pulsar SQL into application logic.\u003c\/p\u003e\n\u003ch2 id=\u0022conclusion\u0022\u003eConclusion\u003c\/h2\u003e\n\u003cp\u003eYou use Pulsar SQL to query event streams from the Pulsar bookies and fetch data streams from persistent storage. Presto workers do the actual querying by using Presto Pulsar connectors. This enables you to create custom queries just like you would while querying an SQL database.\u003c\/p\u003e\n\u003cp\u003ePulsar SQL provides powerful data processing and manipulation capabilities, prioritizing speed without sacrificing function.\u003c\/p\u003e\n"}]</script></head><body class='page bg-secondary'><div id=main-menu-mobile class=main-menu-mobile><ul></ul></div><div class=wrapper><div class='header sticky-top bg-secondary'><div class=container><div class=logo><a href=https://www.pulsar-neighborhood.io><img src=/svg/Pulsar-Neighborhood-Logo.svg class=img-fluid></a></div><div class=logo-mobile><a href=https://www.pulsar-neighborhood.io><img src=/svg/Neighborhood-Icon.svg class=img-fluid></a></div><div id=main-menu class=main-menu><ul><li><a href=/about><span>About The Pulsar Neighborhood</span></a></li><li><a href=https://pulsar.apache.org/ target=_blank><span>About Apache Pulsar</span></a></li><li><a href=https://pulsar.apache.org/docs/en/standalone/ target=_blank><span></span>Project Documentation</span></a></li><li><a href=/index.xml><img src=/svg/square-rss-solid.svg title="Subscribe to The Pulsar Neighborhood feed" class=img-fluid style=height:30px></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container pt-2 pb-3"><div class=row><div class="col-0 col-md-2"><div class=sidebar><div class=mb-2><a href=/guides/getting-started><div class="col-12 btn btn-success">Get Started with Pulsar</div></a></div><div class="spotlight mb-2 border border-primary rounded"><div class="row bg-primary no-gutters"><div class="col-12 text-secondary p-1">&nbsp;Find Topics</div></div><div class=p-1><div class="row no-gutters"><div class="col-12 mb-1"><h4>Category</h4><ul><li>&nbsp;<a class=text-decoration-none href=/categories/at-the-edge>At the Edge</a> [3]</li><li>&nbsp;<a class=text-decoration-none href=/categories/cluster-administration>Cluster Administration</a> [3]</li><li>&nbsp;<a class=text-decoration-none href=/categories/getting-started>Getting Started</a> [15]</li><li>&nbsp;<a class=text-decoration-none href=/categories/machine-learning>Machine Learning</a> [2]</li><li>&nbsp;<a class=text-decoration-none href=/categories/moving-to-pulsar>Moving to Pulsar</a> [11]</li><li>&nbsp;<a class=text-decoration-none href=/categories/pulsar-architecture>Pulsar Architecture</a> [10]</li><li>&nbsp;<a class=text-decoration-none href=/categories/pulsar-components>Pulsar Components</a> [9]</li><li>&nbsp;<a class=text-decoration-none href=/categories/use-cases>Use Cases</a> [6]</li></ul></div><div class=col-12><h4>View All</h4><div class="mt-1 pb-1"><a href=/articles>Articles</a>
&nbsp;|&nbsp;<a href=/guides>Guides</a>
&nbsp;|&nbsp;<a href=/videos>Videos</a></div></div></div></div></div></div></div><div class="col-12 col-md-8"><div class=container><header class=mb-3><div class=pb-2><img src=https://user-images.githubusercontent.com/16946028/193617964-d3d6ebc3-090c-47a2-ad10-d96a41af6838.png alt="How to Use Pulsar SQL Effectively" class=img-fluid style=max-width:85%;max-height:200px></div><h1>How to Use Pulsar SQL Effectively</h1><div class="row no-gutters"><div class="col col-auto mr-1">Categories:</div><div class="col col-auto"><a class=text-decoration-none href=/categories/pulsar-components>Pulsar Components</a>,&nbsp;</div><div class="col col-auto"><a class=text-decoration-none href=/categories/use-cases>Use Cases</a></div></div></header><div class="row mb-3 no-gutters border-top border-bottom"><div class=col-2><ul class="list-group list-group-horizontal mt-1 mb-1"><li class="list-group-item flex-fill border-0 p-0 mr-3"><a href="https://www.linkedin.com/sharing/share-offsite/?mini=true&url=https%3a%2f%2fwww.pulsar-neighborhood.io%2farticles%2fhow-to-use-pulsar-sql-effectively%2f&title=How%20to%20Use%20Pulsar%20SQL%20Effectively" target=_blank><img src=/svg/linkedin-in-brands.svg title="Share this on LinkedIn" class=img-fluid></a></li><li class="list-group-item flex-fill border-0 p-0 mr-3"><a target=_blank href="https://twitter.com/intent/tweet?text=How%20to%20Use%20Pulsar%20SQL%20Effectively&url=https%3a%2f%2fwww.pulsar-neighborhood.io%2farticles%2fhow-to-use-pulsar-sql-effectively%2f&hashtags=apachepulsar&via=pulsar_neighbor"><img src=/svg/twitter-brands.svg title="Share this on Twitter" class=img-fluid></a></li></ul></div><div class="col text-right"><span class=text-muted>Author:</span> Pulsar Neighborhood<br><span class=text-muted>Published:</span> October 3, 2022</div></div><article><p>Apache Pulsar is a distributed messaging and streaming platform created and open-sourced by Yahoo. Its effectiveness has seen it applied beyond pub/sub messaging — all the way to scalable storage. As a result, developers began to see the potential of Pulsar for faster retrieval of real-time data.</p><p>The best way to achieve this is to query data as it arrives rather than when it is in a stored system, such as a database. The faster retrieval of real-time data is the need that led to the development of <a href=https://pulsar.apache.org/docs/sql-overview target=_blank>Pulsar SQL</a>.</p><p>This article explores how Pulsar SQL queries data and the components involved. It also walks through an SQL query example.</p><h2 id=making-the-most-of-pulsar-sql>Making the Most of Pulsar SQL</h2><p>Pulsar SQL is a query layer that sits on top of Apache Pulsar and enables users to query structured data streams stored inside Pulsar. This includes live incoming streams and older stored streams.</p><p>The Pulsar SQL layer relies on <a href=https://trino.io/ target=_blank>Trino</a> — a fast, distributed SQL query engine — to query event streams. This querying process occurs in a <a href=https://prestodb.io/ target=_blank>Presto</a> cluster. Presto is a distributed system that runs a cluster of machines, with each cluster containing a coordinator and multiple workers. Presto workers use the Pulsar Presto connector to access the Pulsar event streams stored in an <a href=https://bookkeeper.apache.org/ target=_blank>Apache Bookkeeper</a> node called a bookie.</p><h3 id=use-case>Use Case</h3><p>Pulsar querying can be instrumental in cases that require real-time analytics. For instance, consider an eCommerce website that recommends products to its users. In such a case, a query can provide real-time feedback when the customer purchases to ensure that their recommendations list is updated accordingly. This might then entail recommending complementary products and removing similar products from the recommendation list.</p><h4 id=pulsars-storage-layer>Pulsar’s Storage Layer</h4><p>Pulsar uses brokers to organize the messages that producers publish, then store them as segments in <a href=https://bookkeeper.apache.org/ target=_blank>Apache Bookkeeper</a> — a scalable and low latency storage service for real-time workloads. Its features make it an ideal solution for Pulsar’s persistent message storage needs. Each of the topics received is replicated to a bookie, guaranteeing that messages the broker receives will be delivered to the intended consumer.</p><p>The replication of messages ensures they are durable and available in two or more servers with mirrored redundant arrays of independent disk (RAID) volumes.</p><p>Consider the eCommerce example in the previous section. When you click to view an item, an event is triggered. Then, a different event begins when you click to purchase the item. A broker then receives these generated event streams and organizes them based on the topic. They are then replicated and stored in bookies before being processed as database updates.</p><p>However, to enhance the user experience and encourage more customer engagement, it’s crucial to populate the webpage with relevant, meaningful recommendations as quickly as possible. That’s where Pulsar SQL comes in. By reading the viewing and purchasing event streams directly from bookies, Pulsar provides the system’s recommender code with the necessary information to create new recommendations before the user has left the site.</p><h4 id=querying-versus-streaming-and-messaging-in-apache-pulsar>Querying Versus Streaming and Messaging in Apache Pulsar</h4><p>Let’s start by understanding an event. An event is a data point generated by a system or producer after a specific occurrence. Streaming and messaging in Pulsar involves the continuous creation of those data points. The data generated by producers must follow a structure defined by a schema and enforced by Pulsar’s registry. A broker forwards that data to the Bookkeeper to store as segments, which are then organized based on topics. The broker replicates those segments before temporarily storing them in the bookies.</p><p>Organizing the received data streams into topics makes it easier for <a href=https://pulsar.apache.org/docs/concepts-messaging/#consumers target=_blank>consumers</a> to read data through a broker. However, this process is not as fast because the broker must first authenticate the consumer’s request and verify the schema.</p><p>In contrast, querying in Pulsar involves reading the data streams directly from the bookies. This is possible because the data streams in the bookies follow the structure specified by the schema.</p><p>The difference between message consumption and querying is that the latter doesn’t care about sequence — it is only interested in reading the event streams. Pulsar SQL reads event streams as soon as the bookie receives the stream segments.</p><p>The Consumer API handles message consumption, designed for the pub/sub model, and is ineffective in reading data in bulk. It also requires the data to be organized in topics and ordered in a prescribed manner.</p><h3 id=pulsar-sql-in-action>Pulsar SQL in Action</h3><p>In this section, you run a local Pulsar cluster in standalone mode using Docker Desktop. First, ensure you have Docker Desktop installed. If you don’t, <a href=https://docs.docker.com/desktop/ target=_blank>download it here</a> and follow the installation instructions.</p><p>Once you’re set-up, start the Pulsar Cluster in Standalone mode in a Docker container by executing the following command in the terminal:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -it -p 6650:6650 -p 8080:8080 --mount source<span style=color:#f92672>=</span>pulsardata,target<span style=color:#f92672>=</span>/pulsar/data --mount source<span style=color:#f92672>=</span>pulsarconf,target<span style=color:#f92672>=</span>/pulsar/conf apachepulsar/pulsar:2.10.1 bin/pulsar standalone
</span></span></code></pre></td></tr></table></div></div><p>Note:</p><ul><li>For Windows, configure Docker Desktop to use Linux Containers.</li><li>For macOS, add the <code>--platform=linux/amd64</code> flag to specify the architecture and OS.</li></ul><p>Wait for the Pulsar standalone container build to complete before proceeding. You can verify that the container has been created by running this command on a new terminal:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>docker ps
</span></span></code></pre></td></tr></table></div></div><p>Make a note of the container ID because you use it in the next step.</p><p>To execute the commands for this project inside the Pulsar container you just created, connect to the container using this command:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>docker exec -it &lt;CONTAINER ID&gt; /bin/bash
</span></span></code></pre></td></tr></table></div></div><p>(Replace <code>&lt;CONTAINER ID></code> with the ID you noted in the previous step.)</p><p>You now have a running Pulsar cluster. This cluster s what you use to execute Pulsar SQL queries. But first, you must start a Pulsar worker on the Pulsar standalone container you just created:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>./bin/pulsar sql-worker run
</span></span></code></pre></td></tr></table></div></div><p>Note that this command only works after the Pulsar standalone container build is complete.</p><p>Now you can start using the SQL command-line interface (CLI). Initiate it by executing the command below:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>./bin/pulsar sql
</span></span></code></pre></td></tr></table></div></div><p>If this is successful, your terminal should change and start with <code>presto></code>.</p><p>You can test the SQL capabilities by executing a few queries.</p><ul><li>Check the catalogs:<code>show catalogs;</code></li><li>Check the schemas: <code>show schemas in pulsar;</code></li><li>Check the tables available with <code>show tables in pulsar."public/default";</code></li></ul><p>Now create some mock data that you can query. To create the mock data, you need a built-in connector called <code>DataGeneratorSource</code>.</p><p>First, type “Q” in the terminal to quit the SQL CLI and return to the container terminal. Start by downloading the necessary connector using <code>CURL</code>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>curl -LO https://archive.apache.org/dist/pulsar/pulsar-2.10.0/connectors/pulsar-io-data-generator-2.10.0.nar
</span></span></code></pre></td></tr></table></div></div><p>Create a directory and name it <code>connectors</code>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir connectors
</span></span></code></pre></td></tr></table></div></div><p>Then, move the <code>data-generator</code> connector to the <code>connectors</code> directory.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>mv  pulsar-io-data-generator-2.10.0.nar connectors
</span></span></code></pre></td></tr></table></div></div><p>Reload the connector to complete its installation:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-8-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>./bin/pulsar-admin sources available-sources
</span></span></code></pre></td></tr></table></div></div><p>Verify that the installed connector is ready for use:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>./bin/pulsar-admin sources available-sources
</span></span></code></pre></td></tr></table></div></div><p>You should get a list of all installed connectors, including the <code>pulsar-io-data-generator-2.10.0.nar</code>. The output should look like this:</p><p><img src=https://user-images.githubusercontent.com/16946028/193617317-52aed41d-b1c3-436a-97c7-2575056596ef.jpg alt=image2></p><p>Last, create the mock data.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>./bin/pulsar-admin sources create --name generator --destinationTopicName generator_test --source-type data-generator
</span></span></code></pre></td></tr></table></div></div><p>The command above creates the topic <code>generator_test</code> in the <code>public/default</code> namespace using the <code>data-generator</code> connector.</p><h4 id=querying-data-using-sql>Querying Data Using SQL</h4><p>Start by going back to the SQL CLI using this command:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>./bin/pulsar sql
</span></span></code></pre></td></tr></table></div></div><p>Now, you can query a topic in the namespace <code>"public/default."</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>show</span> tables <span style=color:#66d9ef>in</span> pulsar.<span style=color:#e6db74>&#34;public/default&#34;</span>;
</span></span></code></pre></td></tr></table></div></div><p>If successful, the output should look like this:</p><pre tabindex=0><code class=language-log data-lang=log>   Table     
----------------
generator_test
(1 row)

Query 20180829_213202_00000_csyeu, FINISHED, 1 node
Splits: 19 total, 19 done (100.00%)
0:02 [1 rows, 38B] [0 rows/s, 17B/s]
</code></pre><p>Now query the data from the topic <code>generator_test</code>.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> pulsar.<span style=color:#e6db74>&#34;public/default&#34;</span>.generator_test;
</span></span></code></pre></td></tr></table></div></div><p>You should see the data arriving as it is generated:</p><p><img src=https://user-images.githubusercontent.com/16946028/193617424-00bae3e5-e78e-4be4-9f50-b843c82c6d72.png alt=image1></p><p>To quit the stream, enter the letter <strong>q</strong> in the terminal.</p><p>You can also create a custom query that filters the data you want. ou should base the custom query you create here on your project&rsquo;s generated data.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> address <span style=color:#66d9ef>from</span> pulsar.<span style=color:#e6db74>&#34;public/default&#34;</span>.generator_test <span style=color:#66d9ef>WHERE</span> age <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>50</span>;
</span></span></code></pre></td></tr></table></div></div><p>The output is:</p><p><img src=https://user-images.githubusercontent.com/16946028/193617451-4443ed9d-3896-47cb-bb51-3cea724d3252.jpg alt=image3></p><p>You can make most of the queries with regular SQL while using Pulsar SQL. For instance, you can use: <code>AND, AT, EXCEPT, FETCH, GROUP, HAVING, INTERSECT, LIMIT, OFFSET, OR, ORDER, and UNION</code>.</p><p>In the example above, you successfully queried structured data streams. The response was structured and in line with the query executed.</p><h3 id=using-the-presto-java-database-connectivity-driver>Using the Presto Java Database Connectivity Driver</h3><p>You can also access Presto via the <a href=https://prestodb.io/docs/current/installation/jdbc.html target=_blank>Presto Java Database Connectivity (JDBC) driver</a>. Java applications can use the Presto JDBC driver to access and perform operations on structured data using query methods such as <code>CREATE</code>, <code>DELETE</code>, <code>UPDATE</code>, and <code>INSERT</code>, among others. With the Presto JDBC driver, you can query topics from clusters that organize structured data in topics. This powerful tool allows you to create complex queries at scale.</p><p>The JDBC driver provides a powerful suite of tools for managing Pulsar SQL directly from Java applications. While the Presto shell provides a direct method of working with SQL in Pulsar, the JDBC driver is a go-to solution for creating Java applications that incorporate Pulsar SQL and allows for more complex integrations of Pulsar SQL into application logic.</p><h2 id=conclusion>Conclusion</h2><p>You use Pulsar SQL to query event streams from the Pulsar bookies and fetch data streams from persistent storage. Presto workers do the actual querying by using Presto Pulsar connectors. This enables you to create custom queries just like you would while querying an SQL database.</p><p>Pulsar SQL provides powerful data processing and manipulation capabilities, prioritizing speed without sacrificing function.</p></article><div class="row border border-primary rounded"><div class="col p-2"><h3>You might also like...</h3><div class=row><div class="col text-center p-2"><div><a href=/articles/apache-pulsar-schema-versus-schemaless-whos-the-winner/><img src=https://user-images.githubusercontent.com/16946028/163627115-5ecb2834-3c8c-42ee-8ab1-1bb52f110f05.png alt class=img-fluid style=max-width:150px></a></div><div class=pt-2><a href=/articles/apache-pulsar-schema-versus-schemaless-whos-the-winner/>Apache Pulsar Schema versus Schemaless — Who’s the Winner?</a></div><div class=pt-2>In this article, we’ll examine how Pulsar Schemas work and contrast them with schemaless systems to …</div></div><div class="col text-center p-2"><div class=pt-2><a href=/articles/understanding-the-roles-of-zookeeper-and-bookkeeper-in-pulsar/>Understanding the Roles of Zookeeper and Bookkeeper in Pulsar</a></div><div class=pt-2>Although they have some similarities, ZooKeeper and BookKeeper provide different administrative …</div></div><div class="col text-center p-2"><div><a href=/articles/apache-pulsar-versus-kinesis/><img src=https://user-images.githubusercontent.com/16946028/186224765-42c7873c-98fd-459f-ab83-41ccc307887e.png alt class=img-fluid style=max-width:150px></a></div><div class=pt-2><a href=/articles/apache-pulsar-versus-kinesis/>Apache Pulsar Versus Kinesis</a></div><div class=pt-2>This article offers a high-level comparison of Pulsar and Kinesis, contrasting important factors …</div></div></div></div></div><br><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="pulsar-neighborhood",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div><div class="col-0 col-md-2"><nav class="navbar navbar-light mb-3"><div class=row><div class=col-12><h4>In this article</h4></div><div class="col-12 border-left border-primary pr-0"><nav id=TableOfContents><ul><li><a href=#making-the-most-of-pulsar-sql>Making the Most of Pulsar SQL</a><ul><li><a href=#use-case>Use Case</a></li><li><a href=#pulsar-sql-in-action>Pulsar SQL in Action</a></li><li><a href=#using-the-presto-java-database-connectivity-driver>Using the Presto Java Database Connectivity Driver</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></nav></div></div></div></div><div class="sub-footer m-5"><div class=row><div class="col-12 text-center"><a href=https://github.com/pulsar-neighborhood/pulsar-neighborhood.github.io/blob/main/content/articles/How-To-Use-Pulsar-SQL-Effectively.md target=_blank>Improve this page</a></div></div><div class="col-8 offset-2"><hr class="bg-primary text-primary"></div><div class="sub-footer-inner mt-2"><div><div class=mb-1>Pulsar Neighborhood</div><div><ul><li style=width:40px><a href=https://github.com/pulsar-neighborhood target=_blank><img src=/svg/github-brands.svg title="Pulsar Neighborhood on GitHub" class=img-fluid></a></li><li class="ml-3 mr-1" style=width:40px><a href=https://twitter.com/pulsar_neighbor target=_blank><img src=/svg/twitter-brands.svg title="Pulsar Neighborhood on Twitter" class=img-fluid></a></li><li style=width:40px><a href=https://www.youtube.com/c/ApachePulsarNeighborhood target=_blank><img src=/svg/youtube-brands.svg title="Pulsar Neighborhood on YouTube" class=img-fluid></a></li><li style=width:40px><a href=https://datastudio.google.com/reporting/743d9f31-c80f-4e60-b520-730631d3c250 target=_blank><img src=/png/google-analytics.png title="Pulsar Neighborhood analytics" class=img-fluid></a></li></ul></div></div><div class=p-5></div><div><div class=mb-1>Apache Pulsar</div><div><ul><li style=width:40px><a href=https://pulsar.apache.org target=_blank><img src=/png/pulsar-icon.jpg title="Apache Pulsar project home" class=img-fluid></a></li><li class="ml-3 mr-1" style=width:40px><a href=https://github.com/apache-pulsar target=_blank><img src=/svg/github-brands.svg title="Apache Pulsar on GitHub" class=img-fluid></a></li><li class=mr-1 style=width:40px><a href=https://twitter.com/Apache_Pulsar target=_blank><img src=/svg/twitter-brands.svg title="Apache Pulsar on Twitter" class=img-fluid></a></li><li class=mr-1 style=width:30px><a href=https://stackoverflow.com/questions/tagged/apache-pulsar target=_blank><img src=/svg/stack-overflow-brands.svg title="Apache Pulsar on Stackoverflow" class=img-fluid></a></li><li style=width:40px><a href=https://apache-pulsar.slack.com target=_blank><img src=/svg/slack-brands.svg title="Apache Pulsar slack channel" class=img-fluid></a></li></ul></div></div></div><div class="row text-center mb-3"><div class=col-12><a class="btn btn-info" href=https://pulsar.apache.org/community/ target=_blank>Join the Pulsar community</a></div></div><div class="row text-center"><div class="col-12 text-center"><div><a href=https://github.com/pulsar-neighborhood/pulsar-neighborhood.github.io/issues/new/choose>Contact Us</a></div></div></div></div><script type=text/javascript src=/js/scripts.min.8efe3e711319c2d0a300a084134e3f3bedcb60dce21f1e0ef12767f654242b44.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js integrity=sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-8S9SD43SBH"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8S9SD43SBH")</script></body></html>
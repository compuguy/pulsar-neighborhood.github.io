<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>The Difference Between Persistent and Non Persistent Topics in Apache Pulsar - Pulsar Neighborhood</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The Pulsar Neighborhood community enables Apache Pulsar users and developers to learn about Pulsar and how to use it in their professional lives; via useful, interactive content (including blogs, Meetups, and YouTube videos). This is all driven by a passionate, vendor neutral, and inclusive community of members."><meta property="og:title" content="The Pulsar Neighborhood"><meta property="og:type" content="article"><meta property="og:url" content="https://www.pulsar-neighborhood.io"><meta property="og:image" content="https://www.pulsar-neighborhood.io/png/blue-logotype.png"><meta property="og:description" content="The Pulsar Neighborhood community enables Apache Pulsar users and developers to learn about Pulsar and how to use it in their professional lives; via useful, interactive content (including blogs, Meetups, and YouTube videos). This is all driven by a passionate, vendor neutral, and inclusive community of members."><meta name=twitter:site content="@pulsar_neighbor"><meta name=twitter:creator content="@pulsar_neighbor"><link rel=alternate type=application/rss+xml href=/index.xml title="Site Title"><meta name=google-site-verification content="m-1Z-0k0EvG9PD7R24pKuETSaBpEvqoXgOYT-0MtuPU"><link rel=icon href=https://www.pulsar-neighborhood.io/favicon.png><link rel=stylesheet href=/css/style.32ad96ee983b063b549f59db931afb8f0db25424bf2d687e1122748a7d183f73.css><style>.ctct-form-defaults{padding:15px!important}</style></head><body class='page bg-secondary'><div id=main-menu-mobile class=main-menu-mobile><ul></ul></div><div class=wrapper><div class='header sticky-top bg-secondary'><div class=container><div class=logo><a href=https://www.pulsar-neighborhood.io><img src=/svg/Pulsar-Neighborhood-Logo.svg class=img-fluid></a></div><div class=logo-mobile><a href=https://www.pulsar-neighborhood.io><img src=/svg/Neighborhood-Icon.svg class=img-fluid></a></div><div id=main-menu class=main-menu><ul><li><a href=/about><span>About The Pulsar Neighborhood</span></a></li><li><a href=https://pulsar.apache.org/ target=_blank><span>About Apache Pulsar</span></a></li><li><a href=https://pulsar.apache.org/docs/en/standalone/ target=_blank><span></span>Project Documentation</span></a></li><li><a href=/index.xml><img src=/svg/square-rss-solid.svg title="Subscribe to The Pulsar Neighborhood feed" class=img-fluid style=height:30px></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container pt-2 pb-3"><div class=row><div class="col-0 col-md-2"><div class=sidebar><div class=mb-2><a href=/guides/getting-started><div class="col-12 btn btn-success">Get Started with Pulsar</div></a></div><div class="spotlight mb-2 border border-primary rounded"><div class="row bg-primary no-gutters"><div class="col-12 text-secondary p-1">&nbsp;Find Articles and Guides</div></div><div class=p-1><div class="row no-gutters"><div class="col-12 mb-1"><h4>Level</h4><ul><li><input class=form-check-input type=checkbox id=100 onclick=toggleFilter(filterOptions.levelFilters,this.id)><label class=form-check-label for=100>&nbsp;Beginner (100)</label></li><li><input class=form-check-input type=checkbox id=200 onclick=toggleFilter(filterOptions.levelFilters,this.id)><label class=form-check-label for=200>&nbsp;Intermediate (200)</label></li><li><input class=form-check-input type=checkbox id=300 onclick=toggleFilter(filterOptions.levelFilters,this.id)><label class=form-check-label for=300>&nbsp;Advanced (300)</label></li></ul></div><div class="row no-gutters"><div class=col-12><h4>Category</h4><ul><li><input class=form-check-input type=checkbox id=at-the-edge onclick=toggleFilter(filterOptions.categoryFilters,this.id)>
<label class=form-check-label for=at-the-edge>&nbsp;At the Edge [3]</label></li><li><input class=form-check-input type=checkbox id=cluster-administration onclick=toggleFilter(filterOptions.categoryFilters,this.id)>
<label class=form-check-label for=cluster-administration>&nbsp;Cluster Administration [2]</label></li><li><input class=form-check-input type=checkbox id=getting-started onclick=toggleFilter(filterOptions.categoryFilters,this.id)>
<label class=form-check-label for=getting-started>&nbsp;Getting Started [13]</label></li><li><input class=form-check-input type=checkbox id=machine-learning onclick=toggleFilter(filterOptions.categoryFilters,this.id)>
<label class=form-check-label for=machine-learning>&nbsp;Machine Learning [2]</label></li><li><input class=form-check-input type=checkbox id=moving-to-pulsar onclick=toggleFilter(filterOptions.categoryFilters,this.id)>
<label class=form-check-label for=moving-to-pulsar>&nbsp;Moving to Pulsar [7]</label></li><li><input class=form-check-input type=checkbox id=newsletter onclick=toggleFilter(filterOptions.categoryFilters,this.id)>
<label class=form-check-label for=newsletter>&nbsp;Newsletter [7]</label></li><li><input class=form-check-input type=checkbox id=project-news onclick=toggleFilter(filterOptions.categoryFilters,this.id)>
<label class=form-check-label for=project-news>&nbsp;Project News [3]</label></li><li><input class=form-check-input type=checkbox id=pulsar-architecture onclick=toggleFilter(filterOptions.categoryFilters,this.id)>
<label class=form-check-label for=pulsar-architecture>&nbsp;Pulsar Architecture [10]</label></li><li><input class=form-check-input type=checkbox id=pulsar-components onclick=toggleFilter(filterOptions.categoryFilters,this.id)>
<label class=form-check-label for=pulsar-components>&nbsp;Pulsar Components [6]</label></li><li><input class=form-check-input type=checkbox id=use-cases onclick=toggleFilter(filterOptions.categoryFilters,this.id)>
<label class=form-check-label for=use-cases>&nbsp;Use Cases [4]</label></li></ul></div></div></div></div></div></div></div><div class="col-12 col-md-8"><div class=container><header class=mb-3><div class=pb-2><img src=https://user-images.githubusercontent.com/16946028/175392241-c8347127-d310-4acd-9a99-0e757bd5e98f.png alt class=img-fluid style=max-width:85%;max-height:200px></div><h1>The Difference Between Persistent and Non Persistent Topics in Apache Pulsar</h1></header><div class="row mb-3 no-gutters border-top border-bottom"><div class=col-2><ul class="list-group list-group-horizontal mt-1 mb-1"><li class="list-group-item flex-fill border-0 p-0 mr-3"><a href="https://www.linkedin.com/sharing/share-offsite/?mini=true&url=https%3a%2f%2fwww.pulsar-neighborhood.io%2farticles%2fthe-difference-between-persistent-and-non-persistent-topics-in-apache-pulsar%2f&title=The%20Difference%20Between%20Persistent%20and%20Non%20Persistent%20Topics%20in%20Apache%20Pulsar" target=_blank><img src=/svg/linkedin-in-brands.svg title="Share this on LinkedIn" class=img-fluid></a></li><li class="list-group-item flex-fill border-0 p-0 mr-3"><a target=_blank href="https://twitter.com/intent/tweet?text=The%20Difference%20Between%20Persistent%20and%20Non%20Persistent%20Topics%20in%20Apache%20Pulsar&url=https%3a%2f%2fwww.pulsar-neighborhood.io%2farticles%2fthe-difference-between-persistent-and-non-persistent-topics-in-apache-pulsar%2f&hashtags=apachepulsar&via=pulsar_neighbor"><img src=/svg/twitter-brands.svg title="Share this on Twitter" class=img-fluid></a></li></ul></div><div class="col text-right"><span class=text-muted>Author:</span> Pulsar Neighborhood<br><span class=text-muted>Published:</span> June 23, 2022</div></div><article><p>A topic in Apache Pulsar is a logical entity that producers write messages/events to, and consumers read messages/events from. A topic is a critical concept in any publish-subscribe (pub-sub), pattern-based architecture.</p><p>Conceptually, Pulsar topics are similar to online news feeds, where news stations push out new stories, and readers can subscribe to news feeds by topic. Similarly, you can logically categorize Apache Pulsar topics per your application needs and group messages received from the Producer application. For example, you can create a topic named “temperature-sensor” to collect all messages from any sensor producing temperature readings.</p><p>This article will explore what Pulsar topics are, the differences between persistent and non-persistent topics in Apache Pulsar, and review some example use cases for both methods.</p><h3 id=what-are-pulsar-topics-and-how-do-they-work>What are Pulsar Topics, and How Do They Work?</h3><p>Pulsar topics are similar to database tables. However, by default they don’t have constraints like data types. It’s a good practice to define a schema/type for the message received on each topic level to guarantee a smoother processing of messages by consumers, as the consumers know what form of messages are expected from the producers. To facilitate this schema definition capability, Apache Pulsar provides a <a href=https://pulsar.apache.org/docs/next/schema-get-started target=_blank>schema registry</a>.</p><p>In Pulsar, you can create as many topics as you need. It’s the producer application’s role to write messages to the required topic and subscribers/consumers to subscribe to one or multiple topics of interest. Each topic is created with a name to help both producers and consumers identify the topic. The name of a topic is chosen by the topic creator and can be anything. Note that in Pulsar, it’s not necessary to create a topic in advance. When publishing messages to a topic, if a topic is not present, Pulsar creates one for you.</p><h2 id=persistent-versus-non-persistent-topics>Persistent Versus Non-Persistent Topics</h2><p>Now that you understand what a topic is and the critical role topics play in Apache Pulsar, let’s explore the difference between persistent and non-persistent topics.</p><p>Here’s an excerpt from the <a href=https://pulsar.apache.org/docs/concepts-messaging/#topics target=_blank>Pulsar documentation</a> that describes these two methods: “Pulsar supports two kinds of topics: persistent and non-persistent. In a persistent topic, all messages are durably persisted on disk (that means on multiple disks unless the broker is standalone), whereas non-persistent topics do not persist messages into storage.”</p><p>To understand the difference, let’s first go through what a persistent topic is and how it works in Apache Pulsar.</p><h3 id=persistent-topics>Persistent Topics</h3><p>A persistent topic stores received messages. They’re stored on one or more disks (based on the setup), ensuring durability even when a process restart of a broker/subscriber happens.</p><p>So, where do the incoming messages in persistent topics get stored? The answer is in BookKeeper nodes (bookies). Below is a diagram that shows how a message flows through the Apache Pulsar cluster and gets stored in a persistent topic using bookies.</p><p><img src=https://user-images.githubusercontent.com/16946028/175391962-642b9c70-57e4-45fa-b05e-6dfb8fc5eece.png alt=image1></p><p>An application generates messages (Producer), and gets to the broker via a Pulsar proxy. The pulsar proxy layer abstracts away the pulsar cluster from client applications, acting as a safety layer as well. The Pulsar proxy node knows how to communicate with Pulsar brokers and forwards the incoming messages to the broker.</p><p>Upon receiving the request, the broker checks which persistent topic each message is targeted to and forwards the received messages to the appropriate bookies to get them persisted. Bookies are based on a distributed write-ahead log (WAL) system that utilizes the ledger mechanism to store messages being received. There can be several ledgers for a single topic.</p><p>There’s a powerful, cost-saving feature in Pulsar called tiered storage that allows older messages to be moved from bookie nodes to an alternative, cheaper storage (like Glacier, as shown in the above diagram). However, you’ll still be able to facilitate client apps to access old messages without any change required in the application code.</p><p>Note that a persistent topic is the default choice in Apache Pulsar, meaning Pulsar will automatically choose to create the topic as a Persistent topic even if you haven’t specified the prefix or the category of the topic to be created.</p><h3 id=non-persistent-topics>Non-Persistent Topics</h3><p>A non-persistent topic doesn’t store received messages. Instead, the incoming messages live in the broker&rsquo;s memory. This means reading and writing are faster than with a persistent topic. This also means there’s no extra burden of topic management or administration, so it’s an even lower latency in producer applications sending a message to a topic.</p><p>However, since messages live in the memory of the broker nodes, whenever a broker node is restarted, the corresponding messages get lost. Whenever a subscriber gets disconnected due to network failure, the transit messages are also lost.</p><h2 id=use-cases-for-apache-pulsars-non-persistent-and-persistent-topics>Use Cases for Apache Pulsar’s Non-Persistent and Persistent Topics</h2><p>Since non-persistent topics don’t store messages on disk and the data lives solely in memory, their application areas are niche by design.</p><p>For instance, you could use non-persistent topics if you need to stream readings from sensors in real-time, as long as it’s okay if you lose one or two readings. Similarly, you could use non-persistent topics in a development/lab environment, where the loss of messages isn’t a concern.</p><p>You should go for persistent topics in all other cases where the durability of messages/message redelivery is critical. There are a lot of use cases for persistent topics like financial transactions, stock transactions, e-commerce events handling, and so on.</p><h2 id=conclusion>Conclusion</h2><p>Topics are a powerful feature offered by Apache Pulsar for message management. Persistent topics are managed by bookies for data storage, whereas the data of non-persistent topics live in broker node memory.</p><p>An application developer would prefer persistent topics as their default choice for production-grade applications. This is because persistent topics offer durability, as well as the option to handle failures through a replay of messages. In addition, persistent topics have the possibility to retain messages for an extended period. Therefore, developers can view, analyze, and troubleshoot the messages stored in the topic at a later point in time when needed.</p><p>To learn more about persistent and non-persistent topics, check out the Apache Pulsar <a href=https://pulsar.apache.org/docs/concepts-messaging/#topics target=_blank>documentation</a> about topics.</p></article><div class="row border border-primary rounded"><div class="col p-2"><h3>You might also like...</h3><div class=row><div class="col text-center p-2"><div><a href=/articles/how-pulsar-and-kafka-partitions-work-and-how-they-differ/><img src=https://user-images.githubusercontent.com/16946028/168374625-c69691a5-420d-4dfd-8229-d0dcf8e03934.png alt class=img-fluid style=max-width:150px></a></div><div class=pt-2><a href=/articles/how-pulsar-and-kafka-partitions-work-and-how-they-differ/>How Pulsar and Kafka Partitions Work (And How They Differ)</a></div><div class=pt-2>Both Pulsar and Kafka aim to increase the amount of data that can be consumed and processed by …</div></div><div class="col text-center p-2"><div class=pt-2><a href=/articles/apache-pulsar-deep-dive-an-end-to-end-view-of-the-data-flow/>[Video] Apache Pulsar Deep Dive an End-to-End View of the Data Flow</a></div><div class=pt-2>Enrico Olivelli gives us a tour of how data moves from the Producer to the Consumer.</div></div><div class="col text-center p-2"><div><a href=/articles/apache-pulsar-schema-versus-schemaless-whos-the-winner/><img src=https://user-images.githubusercontent.com/16946028/163627115-5ecb2834-3c8c-42ee-8ab1-1bb52f110f05.png alt class=img-fluid style=max-width:150px></a></div><div class=pt-2><a href=/articles/apache-pulsar-schema-versus-schemaless-whos-the-winner/>Apache Pulsar Schema versus Schemaless — Who’s the Winner?</a></div><div class=pt-2>In this article, we’ll examine how Pulsar Schemas work and contrast them with schemaless systems to …</div></div></div></div></div><br><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="pulsar-neighborhood",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div><div class="col-0 col-md-2"><nav class="navbar navbar-light mb-3"><div class=row><div class=col-12><h4>In this article</h4></div><div class="col-12 border-left border-primary pr-0"><nav id=TableOfContents><ul><li><ul><li><a href=#what-are-pulsar-topics-and-how-do-they-work>What are Pulsar Topics, and How Do They Work?</a></li></ul></li><li><a href=#persistent-versus-non-persistent-topics>Persistent Versus Non-Persistent Topics</a><ul><li><a href=#persistent-topics>Persistent Topics</a></li><li><a href=#non-persistent-topics>Non-Persistent Topics</a></li></ul></li><li><a href=#use-cases-for-apache-pulsars-non-persistent-and-persistent-topics>Use Cases for Apache Pulsar’s Non-Persistent and Persistent Topics</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></nav><div class="row border border-primary rounded no-gutters"><div class="col-12 bg-primary p-1"><div class=text-secondary>&nbsp;Join Our Newsletter</div></div><div class=col-12><div class=ctct-inline-form data-form-id=7514f5a0-b12d-44b3-93bf-e16449e783ca style=padding:0></div></div></div></div></div></div></div><div class="sub-footer m-5"><div class=row><div class="col-12 text-center"><a href=https://github.com/pulsar-neighborhood/pulsar-neighborhood.github.io/blob/main/content/articles/The-Difference-Between-Persistent-And-Non-Persistent-Topics-in-Apache-Pulsar.md target=_blank>Improve this page</a></div></div><div class="col-8 offset-2"><hr class="bg-primary text-primary"></div><div class="sub-footer-inner mt-2"><div><div class=mb-1>Pulsar Neighborhood</div><div><ul><li style=width:40px><a href=https://github.com/pulsar-neighborhood target=_blank><img src=/svg/github-brands.svg title="Pulsar Neighborhood on GitHub" class=img-fluid></a></li><li class="ml-3 mr-1" style=width:40px><a href=https://twitter.com/pulsar_neighbor target=_blank><img src=/svg/twitter-brands.svg title="Pulsar Neighborhood on Twitter" class=img-fluid></a></li><li style=width:40px><a href=https://www.youtube.com/c/ApachePulsarNeighborhood target=_blank><img src=/svg/youtube-brands.svg title="Pulsar Neighborhood on YouTube" class=img-fluid></a></li><li style=width:40px><a href=https://datastudio.google.com/reporting/743d9f31-c80f-4e60-b520-730631d3c250 target=_blank><img src=/png/google-analytics.png title="Pulsar Neighborhood analytics" class=img-fluid></a></li></ul></div></div><div class=p-5></div><div><div class=mb-1>Apache Pulsar</div><div><ul><li style=width:40px><a href=https://pulsar.apache.org target=_blank><img src=/png/pulsar-icon.jpg title="Apache Pulsar project home" class=img-fluid></a></li><li class="ml-3 mr-1" style=width:40px><a href=https://github.com/apache-pulsar target=_blank><img src=/svg/github-brands.svg title="Apache Pulsar on GitHub" class=img-fluid></a></li><li class=mr-1 style=width:40px><a href=https://twitter.com/Apache_Pulsar target=_blank><img src=/svg/twitter-brands.svg title="Apache Pulsar on Twitter" class=img-fluid></a></li><li class=mr-1 style=width:30px><a href=https://stackoverflow.com/questions/tagged/apache-pulsar target=_blank><img src=/svg/stack-overflow-brands.svg title="Apache Pulsar on Stackoverflow" class=img-fluid></a></li><li style=width:40px><a href=https://apache-pulsar.slack.com target=_blank><img src=/svg/slack-brands.svg title="Apache Pulsar slack channel" class=img-fluid></a></li></ul></div></div></div><div class="row text-center mb-3"><div class=col-12><a class="btn btn-info" href=https://pulsar.apache.org/community/ target=_blank>Join the Pulsar community</a></div></div><div class="row text-center"><div class="col-12 text-center"><div>Privacy Policy&nbsp;&nbsp;|&nbsp;&nbsp;Terms & Condition</div></div></div></div><script type=text/javascript src=/js/scripts.min.8efe3e711319c2d0a300a084134e3f3bedcb60dce21f1e0ef12767f654242b44.js></script>
<script type=text/javascript src=/js/filter.min.2ee09abe7fb6b636d1e7cc4506185cec9d630337089eff4daf0ccc27318f376e.js></script>
<script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js integrity=sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF crossorigin=anonymous></script>
<script>var _ctct_m="310a7590faa964361197c4644ef1de96"</script><script id=signupScript src=//static.ctctcdn.com/js/signup-form-widget/current/signup-form-widget.min.js async defer></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8S9SD43SBH"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8S9SD43SBH")</script></body></html>
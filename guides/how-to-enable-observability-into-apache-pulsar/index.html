<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>How To Enable Observability Into Apache Pulsar - Pulsar Neighborhood</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="How to enable observability for your Pulsar environment using Prometheus and Grafana."><meta property="og:title" content="How To Enable Observability Into Apache Pulsar - Pulsar Neighborhood"><meta property="og:type" content="guide"><meta property="og:url" content="https://www.pulsar-neighborhood.io/guides/how-to-enable-observability-into-apache-pulsar/"><meta property="og:image" content="https://user-images.githubusercontent.com/16946028/184407424-be70e294-c46e-4714-8370-3190a243118a.png"><meta name=description content="How to enable observability for your Pulsar environment using Prometheus and Grafana."><meta name=twitter:site content="@pulsar_neighbor"><meta name=twitter:creator content="@pulsar_neighbor"><link rel=alternate type=application/rss+xml href=/index.xml title="Site Title"><meta name=google-site-verification content="m-1Z-0k0EvG9PD7R24pKuETSaBpEvqoXgOYT-0MtuPU"><link rel=icon href=https://www.pulsar-neighborhood.io/favicon.png><link rel=canonical href=https://www.pulsar-neighborhood.io/guides/how-to-enable-observability-into-apache-pulsar/><link rel=stylesheet href=/css/style.32ad96ee983b063b549f59db931afb8f0db25424bf2d687e1122748a7d183f73.css><style>.ctct-form-defaults{padding:15px!important}</style><script type=application/ld+json>[{"@context":"http://schema.org","@type":"WebPage","name":"Pulsar Neighborhood - How To Enable Observability Into Apache Pulsar","description":"How to enable observability for your Pulsar environment using Prometheus and Grafana.","publisher":{"@type":"Organization","name":"Pulsar Neighborhood"},"keywords":["prometheus, grafana, observability"]},{"@context":"http://schema.org","@type":"TechArticle","headline":"How To Enable Observability Into Apache Pulsar","image":"https:\/\/user-images.githubusercontent.com\/16946028\/184407424-be70e294-c46e-4714-8370-3190a243118a.png","dependencies":"Apache Pulsar Cluster","proficiencyLevel":"300","genre":"Apache Pulsar","publisher":"Pulsar Neighborhood","url":"https:\/\/www.pulsar-neighborhood.io\/guides\/how-to-enable-observability-into-apache-pulsar\/","dateCreated":"2022-08-12 15:57:19 -0500 -0500","datePublished":"2022-08-12 15:57:19 -0500 -0500","dateModified":"2022-08-12 15:57:19 -0500 -0500","description":"How to enable observability for your Pulsar environment using Prometheus and Grafana.","author":{"@type":"Person","name":"Pulsar Neighborhood","url":"https://www.pulsar-neighborhood.io"},"keywords":["prometheus, grafana, observability"],"articleBody":"\u003cp\u003eApache Pulsar, like any other business-critical component in your IT organization, requires monitoring. After all, we can’t know how well a system is running without monitoring it. Over the years, monitoring abilities have been combined — or sometimes replaced — with observability. While the goal remains to validate the state of your systems and applications, observability starts from a healthy baseline and takes a more proactive approach to maintain it. One way to integrate this into your Pulsar environment is to explore the built-in monitoring and observability features of every Pulsar deployment:\u003c\/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eBroker stats\u003c\/strong\u003e — these are JSON files that collect statistics for each topic. You can combine these stats with collected broker metrics on a namespace level, which details broker information and topic statistics.\u003c\/li\u003e\n\u003cli\u003e\u003cstrong\u003eFunction and connector stats\u003c\/strong\u003e — as with the broker stats, these metrics are available in JSON format.\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cp\u003eWhile JSON format is sufficient for listing details, it’s not always the most convenient way to represent data or allow for its interpretation. That’s where a metrics configuration service such as \u003ca href=\u0022https:\/\/prometheus.io\/\u0022 target=\u0022_blank\u0022\u003ePrometheus\u003c\/a\u003e comes in. You can configure the function and connector stats to integrate with Prometheus out of the box. That said, every Pulsar deployment already comes preconfigured for Prometheus integration.\u003c\/p\u003e\n\u003cp\u003eOnce you decide to use Prometheus for collecting metrics, you should consider two other Pulsar statistics that don’t export metrics results into JSON. Instead, they export this data directly to Prometheus:\u003c\/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eZookeeper stats\u003c\/strong\u003e — these are metrics related to the configuration store server, the clients, and Zookeeper. They are displayed using the Prometheus web interface.\u003c\/li\u003e\n\u003cli\u003e\u003cstrong\u003eBookkeeper stats\u003c\/strong\u003e — similar to zookeeper stats, these metrics are available from the Prometheus web interface, showing details related to the bookkeeper framework statistics.\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cp\u003eIf you’re unfamiliar with these metrics components, look at the \u003ca href=\u0022https:\/\/pulsar.apache.org\/docs\/deploy-monitoring\/\u0022 target=\u0022_blank\u0022\u003eofficial Apache Pulsar Monitoring docs\u003c\/a\u003e.\u003c\/p\u003e\n\u003cp\u003eWhere Prometheus is powerful for generating and collecting metrics, you also want a tool for the graphical representation of the metrics results. \u003ca href=\u0022https:\/\/grafana.com\/\u0022 target=\u0022_blank\u0022\u003eGrafana\u003c\/a\u003e is a great option that features tight \u003ca href=\u0022https:\/\/grafana.com\/oss\/prometheus\/\u0022 target=\u0022_blank\u0022\u003eintegration\u003c\/a\u003e with Prometheus.\u003c\/p\u003e\n\u003cp\u003ePrometheus and Grafana allow integration with numerous other IT industry platforms, such as VMware, Kubernetes, NewRelic, DataDog, Azure Log Analytics, and Splunk. So, you can optimize your observability more than your Pulsar infrastructure natively allows.\u003c\/p\u003e\n\u003cp\u003eThis article explores how to enable observability for your Pulsar environment using Prometheus and Grafana, starting from a demo standalone Pulsar cluster. You then learn how to import sample Grafana dashboards for Pulsar from GitHub. Finally, once everything is up and running, we zoom in on several of the standard and crucial metrics for building your observability dashboards on Pulsar.\u003c\/p\u003e\n\u003ch2 id=\u0022setting-up-the-pulsar-standalone-cluster\u0022\u003eSetting up the Pulsar Standalone Cluster\u003c\/h2\u003e\n\u003cp\u003eThere are several ways to deploy a standalone Pulsar cluster for testing. For this scenario, we rely on a Docker containerized deployment.\u003c\/p\u003e\n\u003cp\u003eAssuming you have a Linux-based Docker Desktop setup available, execute the following Docker command to pull the Apache Pulsar image and run it:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003edocker run -it -p 6650:6650 -p 8080:8080 --mount source=pulsardata,target=\/pulsar\/data --mount source=pulsarconf,target=\/pulsar\/conf apachepulsar\/pulsar:2.9.1 bin\/pulsar standalone\u003c\/code\u003e\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414676-7c7d4b7b-edb5-4cb0-9d2e-1a97c8e2b1f7.png\u0022 alt=\u0022Pulsar Docker Pull\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eAfter pulling the images and creating the necessary Docker Volumes (\u003ccode\u003epulsar\/data\u003c\/code\u003e and \u003ccode\u003epulsar\/conf\u003c\/code\u003e), the various Pulsar components initiate. Your output is similar to the image below:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414627-556a780a-97d7-47a1-97d7-d88c73f6da75.png\u0022 alt=\u0022Pulsar Run\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eThis confirms that Apache Pulsar and all necessary components are running.\u003c\/p\u003e\n\u003cp\u003eYou can validate this by inspecting the Docker container for Pulsar using the following Docker command:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003eDocker container ls\u003c\/code\u003e\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414308-d6b0831f-673e-42b7-b554-93c8f3869819.png\u0022 alt=\u0022Docker LS\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eNote the container ID (\u003ccode\u003ea316b99cae0f\u003c\/code\u003e in our example, but your ID is different). Run the following Docker command to connect to the SSH-terminal system prompt of the running container:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003eDocker exec -it \u0026lt;container id\u0026gt; \/bin\/bash\u003c\/code\u003e\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414281-c63ba078-0121-44ec-ba2a-0865353202e5.png\u0022 alt=\u0022Do Exc\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eValidate the Pulsar cluster by running the following \u003ccode\u003ePulsar-admin\u003c\/code\u003e command:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003ebin\/pulsar-admin clusters list\u003c\/code\u003e\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414577-9a7792e9-aae0-4e5d-8acd-975526385415.png\u0022 alt=\u0022Pulsar Clusters List\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eYou can even look at the details of the standalone cluster:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003ebin\/pulsar-admin clusters get standalone\u003c\/code\u003e\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414541-2c39f3ea-a344-4f66-aeb9-ef107984f843.png\u0022 alt=\u0022Pulsar Get Standalone\u0022\u003e\u003c\/p\u003e\n\u003ch2 id=\u0022creating-sample-tenants-namespaces-and-topics-and-generating-data\u0022\u003eCreating Sample Tenants, Namespaces, and Topics, and Generating Data\u003c\/h2\u003e\n\u003cp\u003eBy default, the Pulsar standalone cluster comes with a public tenant and namespace. To localize our sample messaging data, let’s create a new tenant (\u003ccode\u003emarvelheroes\u003c\/code\u003e) and namespace (\u003ccode\u003echaracters\u003c\/code\u003e):\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003ebin\/pulsar-admin tenants create --admin-roles  admin --allowed-clusters standalone\u003c\/code\u003e\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-0-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-0-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-0-2\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-0-2\u0022\u003e2\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-0-3\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-0-3\u0022\u003e3\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003emarvelheroes \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003ebin\/pulsar-admin namespaces create marvelheroes\/characters \n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414337-0a7143a3-a9c7-4527-b31e-a18f66f2c77d.png\u0022 alt=\u0022Pulsar Namespace Create\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eThen, we must create a topic and subscription for our message routing. Execute the following command to do this:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003ebin\/pulsar-admin topics create persistent:\/\/marvelheroes\/characters\/heroes-topic\u003c\/code\u003e\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414685-dab71eca-1b85-49c6-8275-2a0433c144fb.png\u0022 alt=\u0022Pulsar Admin Topics\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eNow, execute this command to create the subscription:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003ebin\/pulsar-client consume -s \u0026quot;heroes-subs\u0026quot; -n 0 persistent:\/\/marvelheroes\/characters\/heroes-topic\u003c\/code\u003e\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414086-5d59b598-3915-4920-ba91-2abe7b7e1f2e.png\u0022 alt=\u0022pulsar consume\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eThis enables us to send a message with the command below:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003ebin\/pulsar-client produce persistent:\/\/marvelheroes\/characters\/heroes-topic -k Spiderman -m \u0026quot;Peter Parker\u0026quot; -s \u0026quot;\\n\u0026quot;\u003c\/code\u003e\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414258-2b910b8e-4688-46d0-bfa3-b41d008985c5.png\u0022 alt=\u0022Pulsar Produce Output\u0022\u003e\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414234-71abf988-c9d6-447e-ace2-7cefa1847baf.png\u0022 alt=\u0022Pulsar Message Output\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eNow, you can see that the command is received:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414661-68c2ea6d-a014-4016-9555-7508a977938a.png\u0022 alt=\u0022Command Received\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eNext, generate a few more messages to validate the produce and consume process (and create some data for your Grafana dashboard). Execute the following command:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003ebin\/pulsar-client produce persistent:\/\/marvelheroes\/characters\/heroes-topic -k Wong -m \u0026quot;Sorcerer Supreme\u0026quot; -s \u0026quot;\\n\u0026quot;\u003c\/code\u003e\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-1-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-1-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-1-2\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-1-2\u0022\u003e2\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-1-3\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-1-3\u0022\u003e3\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-1-4\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-1-4\u0022\u003e4\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-1-5\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-1-5\u0022\u003e5\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-1-6\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-1-6\u0022\u003e6\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-1-7\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-1-7\u0022\u003e7\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003ebin\/pulsar-client produce persistent:\/\/marvelheroes\/characters\/heroes-topic -k DoctorStrange -m \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;Stephen Strange\u0026#34;\u003c\/span\u003e -s \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;\\n\u0026#34;\u003c\/span\u003e \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003ebin\/pulsar-client produce persistent:\/\/marvelheroes\/characters\/heroes-topic -k America -m \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;America Chavez\u0026#34;\u003c\/span\u003e -s \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;\\n\u0026#34;\u003c\/span\u003e \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003ebin\/pulsar-client produce persistent:\/\/marvelheroes\/characters\/heroes-topic -k Thor -m \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;Thorlief Golmen\u0026#34;\u003c\/span\u003e -s \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;\\n\u0026#34;\u003c\/span\u003e \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003ebin\/pulsar-client produce persistent:\/\/marvelheroes\/characters\/heroes-topic -k IronMan -m \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;Tony Stark\u0026#34;\u003c\/span\u003e -s \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;\\n\u0026#34;\u003c\/span\u003e \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003ebin\/pulsar-client produce persistent:\/\/marvelheroes\/characters\/heroes-topic -k BlackPanther -m \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;TChalla\u0026#34;\u003c\/span\u003e -s \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;\\n\u0026#34;\u003c\/span\u003e \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003ebin\/pulsar-client produce persistent:\/\/marvelheroes\/characters\/heroes-topic -k BlackWidow -m \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;Natasha Romanoff\u0026#34;\u003c\/span\u003e -s \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;\\n\u0026#34;\u003c\/span\u003e \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003ebin\/pulsar-client produce persistent:\/\/marvelheroes\/characters\/heroes-topic -k CaptainAmerica -m \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;Steve Rogers\u0026#34;\u003c\/span\u003e -s \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;\\n\u0026#34;\u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eThis results in the message stream shown below:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414493-94145ceb-58b7-4d2a-a3f5-bf187c30da2a.png\u0022 alt=\u0022Stream Result\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eIf you want to view the topic statistics, the following command provides some insights:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003ebin\/pulsar-admin topics stats persistent:\/\/marvelheroes\/characters\/heroes-topic\u003c\/code\u003e\u003c\/p\u003e\n\u003cp\u003eBelow are some detailed metrics from our topic, truncated to reduce image size.\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414220-5993b43a-54a2-4765-ade6-615eb4ff504c.png\u0022 alt=\u0022Pulsar Topic Stats\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eYou can also look at the \u003ca href=\u0022https:\/\/pulsar.apache.org\/docs\/admin-api-topics\u0022 target=\u0022_blank\u0022\u003ePulsar Admin API\/Get Stats\u003c\/a\u003e for more details on each of these metrics.\u003c\/p\u003e\n\u003cp\u003eAlternatively, you can obtain a more detailed view of metrics with the following command:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003ebin\/pulsar-admin topics stats-internal persistent:\/\/marvelheroes\/characters\/heroes\u003c\/code\u003e\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-2-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-2-1\u0022\u003e1\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e-topic \n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414508-0d16e9b4-1c57-46da-8b88-1ab8c4344322.png\u0022 alt=\u0022image20\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eThis output shows us the number of entries (nine) processed by the topic for each Marvel Hero character.\u003c\/p\u003e\n\u003ch2 id=\u0022integrating-prometheus-with-pulsar\u0022\u003eIntegrating Prometheus with Pulsar\u003c\/h2\u003e\n\u003cp\u003eWhile the Pulsar-Admin command line comes with a few options to read out metric statistics, it isn’t the observability tool we want. That’s where we must extend the environment with a Prometheus service acting as the metrics collector and Grafana as a tool for representing data in dynamic dashboards.\u003c\/p\u003e\n\u003cp\u003eThe easiest approach for this sample standalone Pulsar setup is to run another Docker container with the Prometheus engine already available. We recommend \u003ca href=\u0022https:\/\/hub.docker.com\/r\/prom\/prometheus\u0022 target=\u0022_blank\u0022\u003eProm\/Prometheus from Docker Hub\u003c\/a\u003e.\u003c\/p\u003e\n\u003cp\u003eBefore running the Prometheus container, you must provide the correct configuration parameters from your Pulsar environment in a Prometheus YAML configuration file. This file merely refers to the IP address of the Docker host running the Pulsar containerized workload.\u003c\/p\u003e\n\u003cp\u003eWhile most docs refer to this as \u003ccode\u003elocalhost\u003c\/code\u003e, Prometheus doesn’t resolve the address \u003ccode\u003ehttps:\/\/localhost:9090\/Targets\u003c\/code\u003e. So, this example uses the developer\u0026rsquo;s host\u0026rsquo;s virtual IP address (\u003ccode\u003e172.26.96.1\u003c\/code\u003e). This machine uses the Docker Bridge virtual network on a Windows machine with Ubuntu Windows Subsystem for Linux (WSL).\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414621-7a17fcae-efdf-4a2e-9df3-56d68437601f.png\u0022 alt=\u0022WSL adapter\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eYour YAML file should mirror the contents below, save for updating the IP address to yours:\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cdiv style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\n\u003ctable style=\u0022border-spacing:0;padding:0;margin:0;border:0;\u0022\u003e\u003ctr\u003e\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-1\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-1\u0022\u003e 1\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-2\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-2\u0022\u003e 2\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-3\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-3\u0022\u003e 3\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-4\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-4\u0022\u003e 4\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-5\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-5\u0022\u003e 5\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-6\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-6\u0022\u003e 6\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-7\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-7\u0022\u003e 7\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-8\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-8\u0022\u003e 8\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-9\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-9\u0022\u003e 9\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-10\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-10\u0022\u003e10\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-11\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-11\u0022\u003e11\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-12\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-12\u0022\u003e12\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-13\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-13\u0022\u003e13\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-14\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-14\u0022\u003e14\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-15\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-15\u0022\u003e15\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-16\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-16\u0022\u003e16\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-17\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-17\u0022\u003e17\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-18\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-18\u0022\u003e18\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-19\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-19\u0022\u003e19\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-20\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-20\u0022\u003e20\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-21\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-21\u0022\u003e21\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-22\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-22\u0022\u003e22\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-23\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-23\u0022\u003e23\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-24\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-24\u0022\u003e24\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-25\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-25\u0022\u003e25\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-26\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-26\u0022\u003e26\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-27\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-27\u0022\u003e27\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-28\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-28\u0022\u003e28\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-29\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-29\u0022\u003e29\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-30\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-30\u0022\u003e30\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-31\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-31\u0022\u003e31\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-32\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-32\u0022\u003e32\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-33\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-33\u0022\u003e33\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-34\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-34\u0022\u003e34\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-35\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-35\u0022\u003e35\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-36\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-36\u0022\u003e36\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-37\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-37\u0022\u003e37\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-38\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-38\u0022\u003e38\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-39\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-39\u0022\u003e39\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-40\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-40\u0022\u003e40\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-41\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-41\u0022\u003e41\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-42\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-42\u0022\u003e42\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-43\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-43\u0022\u003e43\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-44\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-44\u0022\u003e44\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-45\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-45\u0022\u003e45\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-46\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-46\u0022\u003e46\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-47\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-47\u0022\u003e47\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-48\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-48\u0022\u003e48\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-49\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-49\u0022\u003e49\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-50\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-50\u0022\u003e50\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-51\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-51\u0022\u003e51\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-52\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-52\u0022\u003e52\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-53\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-53\u0022\u003e53\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-54\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-54\u0022\u003e54\u003c\/a\u003e\n\u003c\/span\u003e\u003cspan style=\u0022white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\u0022 id=\u0022hl-3-55\u0022\u003e\u003ca style=\u0022outline:none;text-decoration:none;color:inherit\u0022 href=\u0022#hl-3-55\u0022\u003e55\u003c\/a\u003e\n\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\n\u003ctd style=\u0022vertical-align:top;padding:0;margin:0;border:0;;width:100%\u0022\u003e\n\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;\u0022\u003e\u003ccode class=\u0022language-yaml\u0022 data-lang=\u0022yaml\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e# Licensed under the Apache License, Version 2.0 (the \u0026#34;License\u0026#34;); \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e# you may not use this file except in compliance with the License. \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e# You may obtain a copy of the License at \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e# \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e#     http:\/\/www.apache.org\/licenses\/LICENSE-2.0 \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e# \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e# Unless required by applicable law or agreed to in writing, software \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e# distributed under the License is distributed on an \u0026#34;AS IS\u0026#34; BASIS, \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e# See the License for the specific language governing permissions and \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e# limitations under the License. \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e# \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e--- \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003eglobal\u003c\/span\u003e: \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e  scrape_interval\u003c\/span\u003e: \u003cspan style=\u0022color:#ae81ff\u0022\u003e    15s\u003c\/span\u003e \u003cspan style=\u0022color:#75715e\u0022\u003e# By default, scrape targets every 15 seconds. \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e  evaluation_interval\u003c\/span\u003e: \u003cspan style=\u0022color:#ae81ff\u0022\u003e15s\u003c\/span\u003e \u003cspan style=\u0022color:#75715e\u0022\u003e# By default, scrape targets every 15 seconds. \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#ae81ff\u0022\u003e \u003c\/span\u003e \u003cspan style=\u0022color:#75715e\u0022\u003e# scrape_timeout is set to the global default (10s). \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e  external_labels\u003c\/span\u003e: \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e    cluster\u003c\/span\u003e: \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#39;standalone\u0026#39;\u003c\/span\u003e \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e# Load and evaluate rules in these files every \u0026#39;evaluation_interval\u0026#39; seconds. \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#75715e\u0022\u003e# rule_files: \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003escrape_configs\u003c\/span\u003e: \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e  - job_name\u003c\/span\u003e: \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;proxy\u0026#34;\u003c\/span\u003e \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e    honor_labels\u003c\/span\u003e: \u003cspan style=\u0022color:#66d9ef\u0022\u003etrue\u003c\/span\u003e \u003cspan style=\u0022color:#75715e\u0022\u003e# don\u0026#39;t overwrite job \u0026amp; instance labels \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e    static_configs\u003c\/span\u003e: \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e    - targets\u003c\/span\u003e: \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#ae81ff\u0022\u003e      - \u0026#39;172.26.96.1:8080\u0026#39; \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e  - job_name\u003c\/span\u003e: \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;broker\u0026#34;\u003c\/span\u003e \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e    honor_labels\u003c\/span\u003e: \u003cspan style=\u0022color:#66d9ef\u0022\u003etrue\u003c\/span\u003e \u003cspan style=\u0022color:#75715e\u0022\u003e# don\u0026#39;t overwrite job \u0026amp; instance labels \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e    static_configs\u003c\/span\u003e: \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e    - targets\u003c\/span\u003e: \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#ae81ff\u0022\u003e      - \u0026#39;172.26.96.1:8080\u0026#39; \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e  - job_name\u003c\/span\u003e: \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;bookie\u0026#34;\u003c\/span\u003e \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e    honor_labels\u003c\/span\u003e: \u003cspan style=\u0022color:#66d9ef\u0022\u003etrue\u003c\/span\u003e \u003cspan style=\u0022color:#75715e\u0022\u003e# don\u0026#39;t overwrite job \u0026amp; instance labels \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e    static_configs\u003c\/span\u003e: \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e    - targets\u003c\/span\u003e: \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#ae81ff\u0022\u003e      - \u0026#39;172.26.96.1:8080\u0026#39; \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e  - job_name\u003c\/span\u003e: \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;zookeeper\u0026#34;\u003c\/span\u003e \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e    honor_labels\u003c\/span\u003e: \u003cspan style=\u0022color:#66d9ef\u0022\u003etrue\u003c\/span\u003e \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e    static_configs\u003c\/span\u003e: \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e    - targets\u003c\/span\u003e: \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#ae81ff\u0022\u003e      - \u0026#39;172.26.96.1:8080\u0026#39; \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e  # - job_name\u003c\/span\u003e: \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;node_metrics\u0026#34;\u003c\/span\u003e \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e  #   honor_labels\u003c\/span\u003e: \u003cspan style=\u0022color:#66d9ef\u0022\u003etrue\u003c\/span\u003e \u003cspan style=\u0022color:#75715e\u0022\u003e# don\u0026#39;t overwrite job \u0026amp; instance labels \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e  #   static_configs\u003c\/span\u003e: \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003e  #   - targets\u003c\/span\u003e: \n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#ae81ff\u0022\u003e \u003c\/span\u003e \u003cspan style=\u0022color:#75715e\u0022\u003e#     - \u0026#39;\u0026amp;lt;node1\u0026amp;gt;:9100\u0026#39; \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#ae81ff\u0022\u003e \u003c\/span\u003e \u003cspan style=\u0022color:#75715e\u0022\u003e#     - ... \u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/td\u003e\u003c\/tr\u003e\u003c\/table\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\u003cp\u003eSave this file as \u003ccode\u003epulsarprom.yml\u003c\/code\u003e (or any other name) to your local machine, as you need the file and its path later on.\u003c\/p\u003e\n\u003cp\u003eExecute the following \u003ccode\u003eDocker Run\u003c\/code\u003e command, which pulls the \u003ccode\u003eprom\/prometheus\u003c\/code\u003e image from Docker Hub and loads the YAML file into the \u003ccode\u003eetc\/prometheus\/prometheus.yml\u003c\/code\u003e config file within the running Prometheus container:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003edocker run -p 9090:9090 -v \u0026amp;lt;path to \u0026amp;gt; \/pulsarprom.yml:\/etc\/prometheus\/prometheus.yml prom\/prometheus --config.file=\/etc\/prometheus\/prometheus.yml\u003c\/code\u003e\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414726-7075938b-1dc2-4c4b-b990-c6479cb8034f.png\u0022 alt=\u0022Pulsar Stand Alone\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eFrom your browser, connect to https:\/\/\u0026lt;Docker Host IP-address\u0026gt;:9090, which loads the default Prometheus dashboard:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414557-db6e705b-c603-4bd3-b2e3-3bbeb791856b.png\u0022 alt=\u0022Prom Home\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eThen, from the top menu, select \u003cstrong\u003eStatus\/Targets\u003c\/strong\u003e. Alternatively, directly navigate to https:\/\/\u0026lt;Docker Host IP-address\u0026gt;:9090\/Targets. This page shows the different Pulsar components:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414119-cb2a6ca0-f7b1-4e15-b29a-fdf17b43348c.png\u0022 alt=\u0022Prom Targets\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eSuppose you click any of the endpoint URLs (\u003ca href=\u0022https:\/\/IP-address\/metrics\u0022 target=\u0022_blank\u0022\u003ehttps:\/\/IP-address\/metrics\u003c\/a\u003e). In that case, you are redirected to the Pulsar metric’s details, which technically come from the broker service:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414428-67114a5f-db05-4153-ad04-ea629eead9b4.png\u0022 alt=\u0022Prom Metrics\u0022\u003e\u003c\/p\u003e\n\u003cp\u003ePrometheus picks up these Pulsar metric details and pulls them into Grafana for the dashboard representation.\u003c\/p\u003e\n\u003cp\u003eNote that while the sections are available, Proxy and bookie metrics are not available for the standalone deployment of Pulsar.\u003c\/p\u003e\n\u003cp\u003eThis completes the necessary steps to get Prometheus up and running for Pulsar.\u003c\/p\u003e\n\u003ch2 id=\u0022integrating-grafana-with-pulsar-and-prometheus\u0022\u003eIntegrating Grafana with Pulsar and Prometheus\u003c\/h2\u003e\n\u003cp\u003eLet’s continue with the deployment of the Grafana tooling, again using a Docker container with the Pulsar Standalone setup.\u003c\/p\u003e\n\u003cp\u003ePull the standard Grafana Docker image from Docker Hub and run it by executing the following Docker command:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003edocker run -d --name=grafana -p 3000:3000 grafana\/grafana\u003c\/code\u003e\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414268-7b387969-6924-4326-ab33-fa73760a8f0a.png\u0022 alt=\u0022Grafana Docker\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eThen, connect to the Grafana dashboard from your browser: \u003ca href=\u0022https:\/\/localhost:3000\/\u0022 target=\u0022_blank\u0022\u003ehttps:\/\/localhost:3000\u003c\/a\u003e.\u003c\/p\u003e\n\u003cp\u003eThe default login credentials are admin and admin, but you must update the default password.\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414206-6fe46e8a-d542-4f06-a7bb-3380fcbaf00d.png\u0022 alt=\u0022Grafana Login\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eFrom within the Grafana homepage, select \u003cstrong\u003eData Sources\u003c\/strong\u003eto add your first data source:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414298-8e0445be-c7e0-45c1-a220-320658224fff.png\u0022 alt=\u0022Grafana Dash\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eThen, from the list of supported data sources, choose \u003cstrong\u003ePrometheus\u003c\/strong\u003e:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414565-79f50cd4-a95f-47a3-9bf7-161c2a3930fb.png\u0022 alt=\u0022image24\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eUnder \u003cstrong\u003eHTTP\u003c\/strong\u003e, update the \u003cstrong\u003eURL\u003c\/strong\u003efield with the correct URL your Prometheus runtime is using (http:\/\/\u0026lt;Docker Host IP-address\u0026gt;:9090).\u003c\/p\u003e\n\u003cp\u003eScroll down and click \u003cstrong\u003eSave and Test\u003c\/strong\u003e. You should receive a notification confirming connectivity to the Prometheus runtime.\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414588-dafbff2f-8d58-4e46-b5e3-3446b5a83f2b.png\u0022 alt=\u0022Data source working\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eReturn to the Grafana homepage and select \u003cstrong\u003eDashboards\u003c\/strong\u003e.\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414177-0c7bc960-7e54-4db7-b66a-d4671e1e3843.png\u0022 alt=\u0022Prom Dashboards\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eFrom the \u003cstrong\u003eNew dashboard\u003c\/strong\u003e view, select \u003cstrong\u003eAdd a new panel\u003c\/strong\u003e.\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414583-7a3e34ba-58f8-47d6-bd5b-e50f7d27a97f.png\u0022 alt=\u0022New Dash\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eNotice that Prometheus is the \u003cstrong\u003eData Source\u003c\/strong\u003e. However, there is a list of all available Pulsar metrics under \u003cstrong\u003eMetrics \u0026gt; Select Metric\u003c\/strong\u003e.\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414059-e10ee56a-018e-45f5-bf9f-22380395e8e1.png\u0022 alt=\u0022prometheus dashboard\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eWhile it’s possible to add each metric you\u0026rsquo;re looking for into a single dashboard, Datastax has shouldered much of that work. Our source is available as a \u003ca href=\u0022https:\/\/github.com\/datastax\/pulsar-helm-chart\/tree\/master\/helm-chart-sources\/pulsar\/grafana-dashboards\u0022 target=\u0022_blank\u0022\u003eGitHub repository\u003c\/a\u003e.\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414717-48d676cb-9686-418e-943e-be510fcc377e.png\u0022 alt=\u0022image35\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eTo use these, navigate to the Grafana homepage, select \u003cstrong\u003eDashboards\u003c\/strong\u003e from the left-side menu, and click \u003cstrong\u003eImport\u003c\/strong\u003e.\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414458-0dac0295-d573-4a92-bc1f-ae8b51bb7b71.png\u0022 alt=\u0022Grafana New Dash\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eThere are two ways to manage the import:\u003c\/p\u003e\n\u003cp\u003eThe first is to upload a JSON file from your local machine. Consider running:\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003egit clone pulsar-helm-chart\/helm-chart-sources\/pulsar\/grafana-dashboards\u003c\/code\u003e\u003c\/p\u003e\n\u003cp\u003eat\u003c\/p\u003e\n\u003cp\u003e\u003ccode\u003emaster · datastax\/pulsar-helm-chart (github.com)\u003c\/code\u003e\u003c\/p\u003e\n\u003cp\u003eThis copies all sample JSON files to your local machine.\u003c\/p\u003e\n\u003cp\u003eThe second option is to select an individual JSON file “as raw” from the Datastax GitHub repository, then copy the contents into the \u003cstrong\u003eJSON\u003c\/strong\u003e field in the Grafana portal.\u003c\/p\u003e\n\u003cp\u003eThis is what it looks like to import the contents of the sample JSON file from the Datastax library, \u003ccode\u003eoverview.json\u003c\/code\u003e:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414157-9d36d9c2-901e-486f-895a-3b64774fc53f.png\u0022 alt=\u0022Prom Import\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eClick \u003cstrong\u003eLoad\u003c\/strong\u003e, which brings you to the summary page. Here, confirm by clicking the \u003cstrong\u003eImport\u003c\/strong\u003e button.\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414522-4e58cb38-76b6-4219-81c5-90425428fe09.png\u0022 alt=\u0022image21\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eThe resulting dashboard looks like this:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414606-bdaa83fb-2c26-48ca-8941-daba7285f0c9.png\u0022 alt=\u0022Grafana Pulsar Dashboard\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eThe critical metrics listed in this dashboard are as follows:\u003c\/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eCPU and memory of the nodes\u003c\/strong\u003e — these require mapping with the \u003ca href=\u0022https:\/\/github.com\/prometheus\/node_exporter\u0022 target=\u0022_blank\u0022\u003eNode Exporter\u003c\/a\u003e, disabled by default, for the standalone setup. As with any other system, having a clear view of resource consumption could indicate the system\u0026rsquo;s health, helping you build a baseline for observability and use it as a trigger to alert you when resource consumption deviates from the baseline.\u003c\/li\u003e\n\u003cli\u003e\u003cstrong\u003eStatus of the zookeeper, broker, and proxies in your setup\u003c\/strong\u003e — the broker stats provide insight into the overall broker service information and a view of the topics organized by namespace. By default, these are refreshed out of Pulsar every minute.\u003c\/li\u003e\n\u003cli\u003e\u003cstrong\u003eTop 10 topics backlog\u003c\/strong\u003e — If the number of messages in the backlog grows, this typically indicates a resource or availability issue with your Pulsar cluster. It may also help you identify which topics handle more message traffic, which might necessitate moving them to a larger or dedicated cluster.\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cp\u003eScrolling down exposes more details, including the sample topic we used for the Marvel heroes:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414321-078bb0cb-41ba-46af-954b-79728607ab10.png\u0022 alt=\u0022Grafana Pulsar Dash\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eKey information to understand from this dashboard is listed below:\u003c\/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eTotal producer and consumer counts\u003c\/strong\u003e — observability of both producers and consumers enable your DevOps team to create a baseline for the use and performance of the Pulsar cluster. If these numbers keep growing, you might consider expanding the cluster with more nodes to guarantee performance.\u003c\/li\u003e\n\u003cli\u003e\u003cstrong\u003eNumber of messages processed in a given timeframe\u003c\/strong\u003e — in addition to viewing the message loads, you can also see peak moments, slower moments, or moments of non-usage. This can help your DevOps team decide on overall cluster load, trend analysis, and scalability.\u003c\/li\u003e\n\u003cli\u003e\u003cstrong\u003eTop 10 topics and their storage consumption\u003c\/strong\u003e — the topics compose the engine of message handling; the more significant these numbers, the more messages your cluster is processing. Observing the behavior on an hourly or daily basis helps you identify the average consumption, performance, and availability of your Pulsar infrastructure.\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cp\u003eNow, save the dashboard.\u003c\/p\u003e\n\u003cp\u003eRepeat the same process of importing a JSON file, this time selecting \u003ccode\u003etopic.json\u003c\/code\u003e as the source. The resulting dashboard shows more detailed metrics related to the Pulsar topics:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414136-e4404449-bc6d-4637-9b30-56f2f8c6f14d.png\u0022 alt=\u0022Prom Dashboard\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eAs a final example, import the \u003ccode\u003emessaging.JSON\u003c\/code\u003e dashboard file from the Datastax GitHub repository. The resulting dashboard should look similar to this:\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022https:\/\/user-images.githubusercontent.com\/16946028\/184414652-1c34ba1d-86ec-4458-8e22-5cf83f89bdfe.png\u0022 alt=\u0022Grafana Pulsar Dash\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eThe critical information to observe includes:\u003c\/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eThe number of topics\u003c\/strong\u003e — similar to the previous dashboard, you have a clear view of the behavior of your topics, the number of messages they process, and the overall load. This information keeps your DevOps teams in the know to guarantee the stability of the Pulsar infrastructure.\u003c\/li\u003e\n\u003cli\u003e\u003cstrong\u003eList of subscriptions, producers, and consumers\u003c\/strong\u003e — although the core impact of Pulsar’s performance comes from the number of messages it handles, growth in the core components might also indicate an overloaded or undersized infrastructure.\u003c\/li\u003e\n\u003cli\u003e\u003cstrong\u003eMsg (message) backlog\u003c\/strong\u003e — this represents the total backlog size of messages linked to the given namespace and topic. While having a backlog doesn’t immediately indicate a significant issue, it’s an accurate performance indicator for the overall Pulsar environment’s health and average load, especially when defining a trend analysis.\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003ch2 id=\u0022summary\u0022\u003eSummary\u003c\/h2\u003e\n\u003cp\u003eObservability is crucial for DevOps teams to identify the state of Pulsar services and establish an infrastructure’s baseline. Fortunately, you can easily enable this observability in your Pulsar standalone cluster by integrating Prometheus and Grafana Docker.\u003c\/p\u003e\n\u003cp\u003eTo address the complexity of monitoring the metrics that come with Pulsar observability. DataStax provides an open-source GitHub repository with ready-to-import Grafana dashboards in JSON format. Your DevOps team can quickly access all the metrics needed to analyze and make informed decisions about your infrastructure.\u003c\/p\u003e\n"}]</script></head><body class='page bg-secondary'><div id=main-menu-mobile class=main-menu-mobile><ul></ul></div><div class=wrapper><div class='header sticky-top bg-secondary'><div class=container><div class=logo><a href=https://www.pulsar-neighborhood.io><img src=/svg/Pulsar-Neighborhood-Logo.svg class=img-fluid></a></div><div class=logo-mobile><a href=https://www.pulsar-neighborhood.io><img src=/svg/Neighborhood-Icon.svg class=img-fluid></a></div><div id=main-menu class=main-menu><ul><li><a href=/about><span>About The Pulsar Neighborhood</span></a></li><li><a href=https://pulsar.apache.org/ target=_blank><span>About Apache Pulsar</span></a></li><li><a href=https://pulsar.apache.org/docs/en/standalone/ target=_blank><span></span>Project Documentation</span></a></li><li><a href=/index.xml><img src=/svg/square-rss-solid.svg title="Subscribe to The Pulsar Neighborhood feed" class=img-fluid style=height:30px></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container pt-2 pb-3"><div class=row><div class="col-0 col-md-2"><div class=sidebar><div class=mb-2><a href=/guides/getting-started><div class="col-12 btn btn-success">Get Started with Pulsar</div></a></div><div class="spotlight mb-2 border border-primary rounded"><div class="row bg-primary no-gutters"><div class="col-12 text-secondary p-1">&nbsp;Find Topics</div></div><div class=p-1><div class="row no-gutters"><div class="col-12 mb-1"><h4>Category</h4><ul><li>&nbsp;<a class=text-decoration-none href=/categories/at-the-edge>At the Edge</a> [3]</li><li>&nbsp;<a class=text-decoration-none href=/categories/cluster-administration>Cluster Administration</a> [3]</li><li>&nbsp;<a class=text-decoration-none href=/categories/getting-started>Getting Started</a> [15]</li><li>&nbsp;<a class=text-decoration-none href=/categories/machine-learning>Machine Learning</a> [2]</li><li>&nbsp;<a class=text-decoration-none href=/categories/moving-to-pulsar>Moving to Pulsar</a> [11]</li><li>&nbsp;<a class=text-decoration-none href=/categories/pulsar-architecture>Pulsar Architecture</a> [10]</li><li>&nbsp;<a class=text-decoration-none href=/categories/pulsar-components>Pulsar Components</a> [9]</li><li>&nbsp;<a class=text-decoration-none href=/categories/use-cases>Use Cases</a> [6]</li></ul></div><div class=col-12><h4>View All</h4><div class="mt-1 pb-1"><a href=/articles>Articles</a>
&nbsp;|&nbsp;<a href=/guides>Guides</a>
&nbsp;|&nbsp;<a href=/videos>Videos</a></div></div></div></div></div></div></div><div class="col-12 col-md-8"><div class="container guide"><header class=mb-3><div class=pb-2><img src=https://user-images.githubusercontent.com/16946028/184407424-be70e294-c46e-4714-8370-3190a243118a.png alt class=img-fluid style=max-width:85%;max-height:200px></div><h1 class=title>How To Enable Observability Into Apache Pulsar</h1></header><div class="row mb-3 no-gutters border-top border-bottom"><div class=col-2><ul class="list-group list-group-horizontal mt-1 mb-1"><li class="list-group-item flex-fill border-0 p-0 mr-3"><a href="https://www.linkedin.com/sharing/share-offsite/?mini=true&url=https:https%3a%2f%2fwww.pulsar-neighborhood.io%2fguides%2fhow-to-enable-observability-into-apache-pulsar%2f&title=How%20To%20Enable%20Observability%20Into%20Apache%20Pulsar" target=_blank><img src=/svg/linkedin-in-brands.svg title="Share this on LinkedIn" class=img-fluid></a></li><li class="list-group-item flex-fill border-0 p-0 mr-3"><a target=_blank href="https://twitter.com/intent/tweet?text=How%20To%20Enable%20Observability%20Into%20Apache%20Pulsar&url=https%3a%2f%2fwww.pulsar-neighborhood.io%2fguides%2fhow-to-enable-observability-into-apache-pulsar%2f&hashtags=apachepulsar&via=pulsar_neighbor"><img src=/svg/twitter-brands.svg title="Share this on Twitter" class=img-fluid></a></li></ul></div><div class="col text-right"><span class=text-muted>Author:</span> Pulsar Neighborhood<br><span class=text-muted>Published:</span> August 12, 2022</div></div><article><p>Apache Pulsar, like any other business-critical component in your IT organization, requires monitoring. After all, we can’t know how well a system is running without monitoring it. Over the years, monitoring abilities have been combined — or sometimes replaced — with observability. While the goal remains to validate the state of your systems and applications, observability starts from a healthy baseline and takes a more proactive approach to maintain it. One way to integrate this into your Pulsar environment is to explore the built-in monitoring and observability features of every Pulsar deployment:</p><ul><li><strong>Broker stats</strong> — these are JSON files that collect statistics for each topic. You can combine these stats with collected broker metrics on a namespace level, which details broker information and topic statistics.</li><li><strong>Function and connector stats</strong> — as with the broker stats, these metrics are available in JSON format.</li></ul><p>While JSON format is sufficient for listing details, it’s not always the most convenient way to represent data or allow for its interpretation. That’s where a metrics configuration service such as <a href=https://prometheus.io/ target=_blank>Prometheus</a> comes in. You can configure the function and connector stats to integrate with Prometheus out of the box. That said, every Pulsar deployment already comes preconfigured for Prometheus integration.</p><p>Once you decide to use Prometheus for collecting metrics, you should consider two other Pulsar statistics that don’t export metrics results into JSON. Instead, they export this data directly to Prometheus:</p><ul><li><strong>Zookeeper stats</strong> — these are metrics related to the configuration store server, the clients, and Zookeeper. They are displayed using the Prometheus web interface.</li><li><strong>Bookkeeper stats</strong> — similar to zookeeper stats, these metrics are available from the Prometheus web interface, showing details related to the bookkeeper framework statistics.</li></ul><p>If you’re unfamiliar with these metrics components, look at the <a href=https://pulsar.apache.org/docs/deploy-monitoring/ target=_blank>official Apache Pulsar Monitoring docs</a>.</p><p>Where Prometheus is powerful for generating and collecting metrics, you also want a tool for the graphical representation of the metrics results. <a href=https://grafana.com/ target=_blank>Grafana</a> is a great option that features tight <a href=https://grafana.com/oss/prometheus/ target=_blank>integration</a> with Prometheus.</p><p>Prometheus and Grafana allow integration with numerous other IT industry platforms, such as VMware, Kubernetes, NewRelic, DataDog, Azure Log Analytics, and Splunk. So, you can optimize your observability more than your Pulsar infrastructure natively allows.</p><p>This article explores how to enable observability for your Pulsar environment using Prometheus and Grafana, starting from a demo standalone Pulsar cluster. You then learn how to import sample Grafana dashboards for Pulsar from GitHub. Finally, once everything is up and running, we zoom in on several of the standard and crucial metrics for building your observability dashboards on Pulsar.</p><h2 id=setting-up-the-pulsar-standalone-cluster>Setting up the Pulsar Standalone Cluster</h2><p>There are several ways to deploy a standalone Pulsar cluster for testing. For this scenario, we rely on a Docker containerized deployment.</p><p>Assuming you have a Linux-based Docker Desktop setup available, execute the following Docker command to pull the Apache Pulsar image and run it:</p><p><code>docker run -it -p 6650:6650 -p 8080:8080 --mount source=pulsardata,target=/pulsar/data --mount source=pulsarconf,target=/pulsar/conf apachepulsar/pulsar:2.9.1 bin/pulsar standalone</code></p><p><img src=https://user-images.githubusercontent.com/16946028/184414676-7c7d4b7b-edb5-4cb0-9d2e-1a97c8e2b1f7.png alt="Pulsar Docker Pull"></p><p>After pulling the images and creating the necessary Docker Volumes (<code>pulsar/data</code> and <code>pulsar/conf</code>), the various Pulsar components initiate. Your output is similar to the image below:</p><p><img src=https://user-images.githubusercontent.com/16946028/184414627-556a780a-97d7-47a1-97d7-d88c73f6da75.png alt="Pulsar Run"></p><p>This confirms that Apache Pulsar and all necessary components are running.</p><p>You can validate this by inspecting the Docker container for Pulsar using the following Docker command:</p><p><code>Docker container ls</code></p><p><img src=https://user-images.githubusercontent.com/16946028/184414308-d6b0831f-673e-42b7-b554-93c8f3869819.png alt="Docker LS"></p><p>Note the container ID (<code>a316b99cae0f</code> in our example, but your ID is different). Run the following Docker command to connect to the SSH-terminal system prompt of the running container:</p><p><code>Docker exec -it &lt;container id> /bin/bash</code></p><p><img src=https://user-images.githubusercontent.com/16946028/184414281-c63ba078-0121-44ec-ba2a-0865353202e5.png alt="Do Exc"></p><p>Validate the Pulsar cluster by running the following <code>Pulsar-admin</code> command:</p><p><code>bin/pulsar-admin clusters list</code></p><p><img src=https://user-images.githubusercontent.com/16946028/184414577-9a7792e9-aae0-4e5d-8acd-975526385415.png alt="Pulsar Clusters List"></p><p>You can even look at the details of the standalone cluster:</p><p><code>bin/pulsar-admin clusters get standalone</code></p><p><img src=https://user-images.githubusercontent.com/16946028/184414541-2c39f3ea-a344-4f66-aeb9-ef107984f843.png alt="Pulsar Get Standalone"></p><h2 id=creating-sample-tenants-namespaces-and-topics-and-generating-data>Creating Sample Tenants, Namespaces, and Topics, and Generating Data</h2><p>By default, the Pulsar standalone cluster comes with a public tenant and namespace. To localize our sample messaging data, let’s create a new tenant (<code>marvelheroes</code>) and namespace (<code>characters</code>):</p><p><code>bin/pulsar-admin tenants create --admin-roles admin --allowed-clusters standalone</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-1>1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-2>2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>marvelheroes 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bin/pulsar-admin namespaces create marvelheroes/characters 
</span></span></code></pre></td></tr></table></div></div><p><img src=https://user-images.githubusercontent.com/16946028/184414337-0a7143a3-a9c7-4527-b31e-a18f66f2c77d.png alt="Pulsar Namespace Create"></p><p>Then, we must create a topic and subscription for our message routing. Execute the following command to do this:</p><p><code>bin/pulsar-admin topics create persistent://marvelheroes/characters/heroes-topic</code></p><p><img src=https://user-images.githubusercontent.com/16946028/184414685-dab71eca-1b85-49c6-8275-2a0433c144fb.png alt="Pulsar Admin Topics"></p><p>Now, execute this command to create the subscription:</p><p><code>bin/pulsar-client consume -s "heroes-subs" -n 0 persistent://marvelheroes/characters/heroes-topic</code></p><p><img src=https://user-images.githubusercontent.com/16946028/184414086-5d59b598-3915-4920-ba91-2abe7b7e1f2e.png alt="pulsar consume"></p><p>This enables us to send a message with the command below:</p><p><code>bin/pulsar-client produce persistent://marvelheroes/characters/heroes-topic -k Spiderman -m "Peter Parker" -s "\n"</code></p><p><img src=https://user-images.githubusercontent.com/16946028/184414258-2b910b8e-4688-46d0-bfa3-b41d008985c5.png alt="Pulsar Produce Output"></p><p><img src=https://user-images.githubusercontent.com/16946028/184414234-71abf988-c9d6-447e-ace2-7cefa1847baf.png alt="Pulsar Message Output"></p><p>Now, you can see that the command is received:</p><p><img src=https://user-images.githubusercontent.com/16946028/184414661-68c2ea6d-a014-4016-9555-7508a977938a.png alt="Command Received"></p><p>Next, generate a few more messages to validate the produce and consume process (and create some data for your Grafana dashboard). Execute the following command:</p><p><code>bin/pulsar-client produce persistent://marvelheroes/characters/heroes-topic -k Wong -m "Sorcerer Supreme" -s "\n"</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-1>1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-2>2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-3>3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-4>4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-5>5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-6>6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-7>7</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>bin/pulsar-client produce persistent://marvelheroes/characters/heroes-topic -k DoctorStrange -m <span style=color:#e6db74>&#34;Stephen Strange&#34;</span> -s <span style=color:#e6db74>&#34;\n&#34;</span> 
</span></span><span style=display:flex><span>bin/pulsar-client produce persistent://marvelheroes/characters/heroes-topic -k America -m <span style=color:#e6db74>&#34;America Chavez&#34;</span> -s <span style=color:#e6db74>&#34;\n&#34;</span> 
</span></span><span style=display:flex><span>bin/pulsar-client produce persistent://marvelheroes/characters/heroes-topic -k Thor -m <span style=color:#e6db74>&#34;Thorlief Golmen&#34;</span> -s <span style=color:#e6db74>&#34;\n&#34;</span> 
</span></span><span style=display:flex><span>bin/pulsar-client produce persistent://marvelheroes/characters/heroes-topic -k IronMan -m <span style=color:#e6db74>&#34;Tony Stark&#34;</span> -s <span style=color:#e6db74>&#34;\n&#34;</span> 
</span></span><span style=display:flex><span>bin/pulsar-client produce persistent://marvelheroes/characters/heroes-topic -k BlackPanther -m <span style=color:#e6db74>&#34;TChalla&#34;</span> -s <span style=color:#e6db74>&#34;\n&#34;</span> 
</span></span><span style=display:flex><span>bin/pulsar-client produce persistent://marvelheroes/characters/heroes-topic -k BlackWidow -m <span style=color:#e6db74>&#34;Natasha Romanoff&#34;</span> -s <span style=color:#e6db74>&#34;\n&#34;</span> 
</span></span><span style=display:flex><span>bin/pulsar-client produce persistent://marvelheroes/characters/heroes-topic -k CaptainAmerica -m <span style=color:#e6db74>&#34;Steve Rogers&#34;</span> -s <span style=color:#e6db74>&#34;\n&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>This results in the message stream shown below:</p><p><img src=https://user-images.githubusercontent.com/16946028/184414493-94145ceb-58b7-4d2a-a3f5-bf187c30da2a.png alt="Stream Result"></p><p>If you want to view the topic statistics, the following command provides some insights:</p><p><code>bin/pulsar-admin topics stats persistent://marvelheroes/characters/heroes-topic</code></p><p>Below are some detailed metrics from our topic, truncated to reduce image size.</p><p><img src=https://user-images.githubusercontent.com/16946028/184414220-5993b43a-54a2-4765-ade6-615eb4ff504c.png alt="Pulsar Topic Stats"></p><p>You can also look at the <a href=https://pulsar.apache.org/docs/admin-api-topics target=_blank>Pulsar Admin API/Get Stats</a> for more details on each of these metrics.</p><p>Alternatively, you can obtain a more detailed view of metrics with the following command:</p><p><code>bin/pulsar-admin topics stats-internal persistent://marvelheroes/characters/heroes</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>-topic 
</span></span></code></pre></td></tr></table></div></div><p><img src=https://user-images.githubusercontent.com/16946028/184414508-0d16e9b4-1c57-46da-8b88-1ab8c4344322.png alt=image20></p><p>This output shows us the number of entries (nine) processed by the topic for each Marvel Hero character.</p><h2 id=integrating-prometheus-with-pulsar>Integrating Prometheus with Pulsar</h2><p>While the Pulsar-Admin command line comes with a few options to read out metric statistics, it isn’t the observability tool we want. That’s where we must extend the environment with a Prometheus service acting as the metrics collector and Grafana as a tool for representing data in dynamic dashboards.</p><p>The easiest approach for this sample standalone Pulsar setup is to run another Docker container with the Prometheus engine already available. We recommend <a href=https://hub.docker.com/r/prom/prometheus target=_blank>Prom/Prometheus from Docker Hub</a>.</p><p>Before running the Prometheus container, you must provide the correct configuration parameters from your Pulsar environment in a Prometheus YAML configuration file. This file merely refers to the IP address of the Docker host running the Pulsar containerized workload.</p><p>While most docs refer to this as <code>localhost</code>, Prometheus doesn’t resolve the address <code>https://localhost:9090/Targets</code>. So, this example uses the developer&rsquo;s host&rsquo;s virtual IP address (<code>172.26.96.1</code>). This machine uses the Docker Bridge virtual network on a Windows machine with Ubuntu Windows Subsystem for Linux (WSL).</p><p><img src=https://user-images.githubusercontent.com/16946028/184414621-7a17fcae-efdf-4a2e-9df3-56d68437601f.png alt="WSL adapter"></p><p>Your YAML file should mirror the contents below, save for updating the IP address to yours:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-14>14</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-15>15</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-16>16</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-17>17</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-18>18</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-19>19</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-20>20</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-21>21</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-22>22</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-23>23</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-24>24</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-25>25</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-26>26</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-27>27</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-28>28</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-29>29</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-30>30</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-31>31</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-32>32</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-33>33</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-34>34</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-35>35</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-36>36</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-37>37</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-38>38</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-39>39</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-40>40</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-41>41</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-42>42</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-43>43</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-44><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-44>44</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-45><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-45>45</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-46><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-46>46</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-47><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-47>47</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-48><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-48>48</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-49><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-49>49</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-50><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-50>50</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-51><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-51>51</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-52><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-52>52</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-53><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-53>53</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-54><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-54>54</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-55><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-55>55</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># Licensed under the Apache License, Version 2.0 (the &#34;License&#34;); </span>
</span></span><span style=display:flex><span><span style=color:#75715e># you may not use this file except in compliance with the License. </span>
</span></span><span style=display:flex><span><span style=color:#75715e># You may obtain a copy of the License at </span>
</span></span><span style=display:flex><span><span style=color:#75715e># </span>
</span></span><span style=display:flex><span><span style=color:#75715e>#     http://www.apache.org/licenses/LICENSE-2.0 </span>
</span></span><span style=display:flex><span><span style=color:#75715e># </span>
</span></span><span style=display:flex><span><span style=color:#75715e># Unless required by applicable law or agreed to in writing, software </span>
</span></span><span style=display:flex><span><span style=color:#75715e># distributed under the License is distributed on an &#34;AS IS&#34; BASIS, </span>
</span></span><span style=display:flex><span><span style=color:#75715e># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. </span>
</span></span><span style=display:flex><span><span style=color:#75715e># See the License for the specific language governing permissions and </span>
</span></span><span style=display:flex><span><span style=color:#75715e># limitations under the License. </span>
</span></span><span style=display:flex><span><span style=color:#75715e># </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>--- 
</span></span><span style=display:flex><span><span style=color:#f92672>global</span>: 
</span></span><span style=display:flex><span><span style=color:#f92672>  scrape_interval</span>: <span style=color:#ae81ff>    15s</span> <span style=color:#75715e># By default, scrape targets every 15 seconds. </span>
</span></span><span style=display:flex><span><span style=color:#f92672>  evaluation_interval</span>: <span style=color:#ae81ff>15s</span> <span style=color:#75715e># By default, scrape targets every 15 seconds. </span>
</span></span><span style=display:flex><span><span style=color:#ae81ff> </span> <span style=color:#75715e># scrape_timeout is set to the global default (10s). </span>
</span></span><span style=display:flex><span><span style=color:#f92672>  external_labels</span>: 
</span></span><span style=display:flex><span><span style=color:#f92672>    cluster</span>: <span style=color:#e6db74>&#39;standalone&#39;</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Load and evaluate rules in these files every &#39;evaluation_interval&#39; seconds. </span>
</span></span><span style=display:flex><span><span style=color:#75715e># rule_files: </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>scrape_configs</span>: 
</span></span><span style=display:flex><span><span style=color:#f92672>  - job_name</span>: <span style=color:#e6db74>&#34;proxy&#34;</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>    honor_labels</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e># don&#39;t overwrite job &amp; instance labels </span>
</span></span><span style=display:flex><span><span style=color:#f92672>    static_configs</span>: 
</span></span><span style=display:flex><span><span style=color:#f92672>    - targets</span>: 
</span></span><span style=display:flex><span><span style=color:#ae81ff>      - &#39;172.26.96.1:8080&#39; </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>  - job_name</span>: <span style=color:#e6db74>&#34;broker&#34;</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>    honor_labels</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e># don&#39;t overwrite job &amp; instance labels </span>
</span></span><span style=display:flex><span><span style=color:#f92672>    static_configs</span>: 
</span></span><span style=display:flex><span><span style=color:#f92672>    - targets</span>: 
</span></span><span style=display:flex><span><span style=color:#ae81ff>      - &#39;172.26.96.1:8080&#39; </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>  - job_name</span>: <span style=color:#e6db74>&#34;bookie&#34;</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>    honor_labels</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e># don&#39;t overwrite job &amp; instance labels </span>
</span></span><span style=display:flex><span><span style=color:#f92672>    static_configs</span>: 
</span></span><span style=display:flex><span><span style=color:#f92672>    - targets</span>: 
</span></span><span style=display:flex><span><span style=color:#ae81ff>      - &#39;172.26.96.1:8080&#39; </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>  - job_name</span>: <span style=color:#e6db74>&#34;zookeeper&#34;</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>    honor_labels</span>: <span style=color:#66d9ef>true</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>    static_configs</span>: 
</span></span><span style=display:flex><span><span style=color:#f92672>    - targets</span>: 
</span></span><span style=display:flex><span><span style=color:#ae81ff>      - &#39;172.26.96.1:8080&#39; </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>  # - job_name</span>: <span style=color:#e6db74>&#34;node_metrics&#34;</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>  #   honor_labels</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e># don&#39;t overwrite job &amp; instance labels </span>
</span></span><span style=display:flex><span><span style=color:#f92672>  #   static_configs</span>: 
</span></span><span style=display:flex><span><span style=color:#f92672>  #   - targets</span>: 
</span></span><span style=display:flex><span><span style=color:#ae81ff> </span> <span style=color:#75715e>#     - &#39;&amp;lt;node1&amp;gt;:9100&#39; </span>
</span></span><span style=display:flex><span><span style=color:#ae81ff> </span> <span style=color:#75715e>#     - ... </span>
</span></span></code></pre></td></tr></table></div></div><p>Save this file as <code>pulsarprom.yml</code> (or any other name) to your local machine, as you need the file and its path later on.</p><p>Execute the following <code>Docker Run</code> command, which pulls the <code>prom/prometheus</code> image from Docker Hub and loads the YAML file into the <code>etc/prometheus/prometheus.yml</code> config file within the running Prometheus container:</p><p><code>docker run -p 9090:9090 -v &amp;lt;path to &amp;gt; /pulsarprom.yml:/etc/prometheus/prometheus.yml prom/prometheus --config.file=/etc/prometheus/prometheus.yml</code></p><p><img src=https://user-images.githubusercontent.com/16946028/184414726-7075938b-1dc2-4c4b-b990-c6479cb8034f.png alt="Pulsar Stand Alone"></p><p>From your browser, connect to https://&lt;Docker Host IP-address>:9090, which loads the default Prometheus dashboard:</p><p><img src=https://user-images.githubusercontent.com/16946028/184414557-db6e705b-c603-4bd3-b2e3-3bbeb791856b.png alt="Prom Home"></p><p>Then, from the top menu, select <strong>Status/Targets</strong>. Alternatively, directly navigate to https://&lt;Docker Host IP-address>:9090/Targets. This page shows the different Pulsar components:</p><p><img src=https://user-images.githubusercontent.com/16946028/184414119-cb2a6ca0-f7b1-4e15-b29a-fdf17b43348c.png alt="Prom Targets"></p><p>Suppose you click any of the endpoint URLs (<a href=https://IP-address/metrics target=_blank>https://IP-address/metrics</a>). In that case, you are redirected to the Pulsar metric’s details, which technically come from the broker service:</p><p><img src=https://user-images.githubusercontent.com/16946028/184414428-67114a5f-db05-4153-ad04-ea629eead9b4.png alt="Prom Metrics"></p><p>Prometheus picks up these Pulsar metric details and pulls them into Grafana for the dashboard representation.</p><p>Note that while the sections are available, Proxy and bookie metrics are not available for the standalone deployment of Pulsar.</p><p>This completes the necessary steps to get Prometheus up and running for Pulsar.</p><h2 id=integrating-grafana-with-pulsar-and-prometheus>Integrating Grafana with Pulsar and Prometheus</h2><p>Let’s continue with the deployment of the Grafana tooling, again using a Docker container with the Pulsar Standalone setup.</p><p>Pull the standard Grafana Docker image from Docker Hub and run it by executing the following Docker command:</p><p><code>docker run -d --name=grafana -p 3000:3000 grafana/grafana</code></p><p><img src=https://user-images.githubusercontent.com/16946028/184414268-7b387969-6924-4326-ab33-fa73760a8f0a.png alt="Grafana Docker"></p><p>Then, connect to the Grafana dashboard from your browser: <a href=https://localhost:3000/ target=_blank>https://localhost:3000</a>.</p><p>The default login credentials are admin and admin, but you must update the default password.</p><p><img src=https://user-images.githubusercontent.com/16946028/184414206-6fe46e8a-d542-4f06-a7bb-3380fcbaf00d.png alt="Grafana Login"></p><p>From within the Grafana homepage, select <strong>Data Sources</strong>to add your first data source:</p><p><img src=https://user-images.githubusercontent.com/16946028/184414298-8e0445be-c7e0-45c1-a220-320658224fff.png alt="Grafana Dash"></p><p>Then, from the list of supported data sources, choose <strong>Prometheus</strong>:</p><p><img src=https://user-images.githubusercontent.com/16946028/184414565-79f50cd4-a95f-47a3-9bf7-161c2a3930fb.png alt=image24></p><p>Under <strong>HTTP</strong>, update the <strong>URL</strong>field with the correct URL your Prometheus runtime is using (http://&lt;Docker Host IP-address>:9090).</p><p>Scroll down and click <strong>Save and Test</strong>. You should receive a notification confirming connectivity to the Prometheus runtime.</p><p><img src=https://user-images.githubusercontent.com/16946028/184414588-dafbff2f-8d58-4e46-b5e3-3446b5a83f2b.png alt="Data source working"></p><p>Return to the Grafana homepage and select <strong>Dashboards</strong>.</p><p><img src=https://user-images.githubusercontent.com/16946028/184414177-0c7bc960-7e54-4db7-b66a-d4671e1e3843.png alt="Prom Dashboards"></p><p>From the <strong>New dashboard</strong> view, select <strong>Add a new panel</strong>.</p><p><img src=https://user-images.githubusercontent.com/16946028/184414583-7a3e34ba-58f8-47d6-bd5b-e50f7d27a97f.png alt="New Dash"></p><p>Notice that Prometheus is the <strong>Data Source</strong>. However, there is a list of all available Pulsar metrics under <strong>Metrics > Select Metric</strong>.</p><p><img src=https://user-images.githubusercontent.com/16946028/184414059-e10ee56a-018e-45f5-bf9f-22380395e8e1.png alt="prometheus dashboard"></p><p>While it’s possible to add each metric you&rsquo;re looking for into a single dashboard, Datastax has shouldered much of that work. Our source is available as a <a href=https://github.com/datastax/pulsar-helm-chart/tree/master/helm-chart-sources/pulsar/grafana-dashboards target=_blank>GitHub repository</a>.</p><p><img src=https://user-images.githubusercontent.com/16946028/184414717-48d676cb-9686-418e-943e-be510fcc377e.png alt=image35></p><p>To use these, navigate to the Grafana homepage, select <strong>Dashboards</strong> from the left-side menu, and click <strong>Import</strong>.</p><p><img src=https://user-images.githubusercontent.com/16946028/184414458-0dac0295-d573-4a92-bc1f-ae8b51bb7b71.png alt="Grafana New Dash"></p><p>There are two ways to manage the import:</p><p>The first is to upload a JSON file from your local machine. Consider running:</p><p><code>git clone pulsar-helm-chart/helm-chart-sources/pulsar/grafana-dashboards</code></p><p>at</p><p><code>master · datastax/pulsar-helm-chart (github.com)</code></p><p>This copies all sample JSON files to your local machine.</p><p>The second option is to select an individual JSON file “as raw” from the Datastax GitHub repository, then copy the contents into the <strong>JSON</strong> field in the Grafana portal.</p><p>This is what it looks like to import the contents of the sample JSON file from the Datastax library, <code>overview.json</code>:</p><p><img src=https://user-images.githubusercontent.com/16946028/184414157-9d36d9c2-901e-486f-895a-3b64774fc53f.png alt="Prom Import"></p><p>Click <strong>Load</strong>, which brings you to the summary page. Here, confirm by clicking the <strong>Import</strong> button.</p><p><img src=https://user-images.githubusercontent.com/16946028/184414522-4e58cb38-76b6-4219-81c5-90425428fe09.png alt=image21></p><p>The resulting dashboard looks like this:</p><p><img src=https://user-images.githubusercontent.com/16946028/184414606-bdaa83fb-2c26-48ca-8941-daba7285f0c9.png alt="Grafana Pulsar Dashboard"></p><p>The critical metrics listed in this dashboard are as follows:</p><ul><li><strong>CPU and memory of the nodes</strong> — these require mapping with the <a href=https://github.com/prometheus/node_exporter target=_blank>Node Exporter</a>, disabled by default, for the standalone setup. As with any other system, having a clear view of resource consumption could indicate the system&rsquo;s health, helping you build a baseline for observability and use it as a trigger to alert you when resource consumption deviates from the baseline.</li><li><strong>Status of the zookeeper, broker, and proxies in your setup</strong> — the broker stats provide insight into the overall broker service information and a view of the topics organized by namespace. By default, these are refreshed out of Pulsar every minute.</li><li><strong>Top 10 topics backlog</strong> — If the number of messages in the backlog grows, this typically indicates a resource or availability issue with your Pulsar cluster. It may also help you identify which topics handle more message traffic, which might necessitate moving them to a larger or dedicated cluster.</li></ul><p>Scrolling down exposes more details, including the sample topic we used for the Marvel heroes:</p><p><img src=https://user-images.githubusercontent.com/16946028/184414321-078bb0cb-41ba-46af-954b-79728607ab10.png alt="Grafana Pulsar Dash"></p><p>Key information to understand from this dashboard is listed below:</p><ul><li><strong>Total producer and consumer counts</strong> — observability of both producers and consumers enable your DevOps team to create a baseline for the use and performance of the Pulsar cluster. If these numbers keep growing, you might consider expanding the cluster with more nodes to guarantee performance.</li><li><strong>Number of messages processed in a given timeframe</strong> — in addition to viewing the message loads, you can also see peak moments, slower moments, or moments of non-usage. This can help your DevOps team decide on overall cluster load, trend analysis, and scalability.</li><li><strong>Top 10 topics and their storage consumption</strong> — the topics compose the engine of message handling; the more significant these numbers, the more messages your cluster is processing. Observing the behavior on an hourly or daily basis helps you identify the average consumption, performance, and availability of your Pulsar infrastructure.</li></ul><p>Now, save the dashboard.</p><p>Repeat the same process of importing a JSON file, this time selecting <code>topic.json</code> as the source. The resulting dashboard shows more detailed metrics related to the Pulsar topics:</p><p><img src=https://user-images.githubusercontent.com/16946028/184414136-e4404449-bc6d-4637-9b30-56f2f8c6f14d.png alt="Prom Dashboard"></p><p>As a final example, import the <code>messaging.JSON</code> dashboard file from the Datastax GitHub repository. The resulting dashboard should look similar to this:</p><p><img src=https://user-images.githubusercontent.com/16946028/184414652-1c34ba1d-86ec-4458-8e22-5cf83f89bdfe.png alt="Grafana Pulsar Dash"></p><p>The critical information to observe includes:</p><ul><li><strong>The number of topics</strong> — similar to the previous dashboard, you have a clear view of the behavior of your topics, the number of messages they process, and the overall load. This information keeps your DevOps teams in the know to guarantee the stability of the Pulsar infrastructure.</li><li><strong>List of subscriptions, producers, and consumers</strong> — although the core impact of Pulsar’s performance comes from the number of messages it handles, growth in the core components might also indicate an overloaded or undersized infrastructure.</li><li><strong>Msg (message) backlog</strong> — this represents the total backlog size of messages linked to the given namespace and topic. While having a backlog doesn’t immediately indicate a significant issue, it’s an accurate performance indicator for the overall Pulsar environment’s health and average load, especially when defining a trend analysis.</li></ul><h2 id=summary>Summary</h2><p>Observability is crucial for DevOps teams to identify the state of Pulsar services and establish an infrastructure’s baseline. Fortunately, you can easily enable this observability in your Pulsar standalone cluster by integrating Prometheus and Grafana Docker.</p><p>To address the complexity of monitoring the metrics that come with Pulsar observability. DataStax provides an open-source GitHub repository with ready-to-import Grafana dashboards in JSON format. Your DevOps team can quickly access all the metrics needed to analyze and make informed decisions about your infrastructure.</p></article></div></div><div class="col-0 col-md-2"><nav class="navbar navbar-light mb-3"><div class=row><div class=col-12><h4>In this article</h4></div><div class="col-12 border-left border-primary pr-0"><nav id=TableOfContents><ul><li><a href=#setting-up-the-pulsar-standalone-cluster>Setting up the Pulsar Standalone Cluster</a></li><li><a href=#creating-sample-tenants-namespaces-and-topics-and-generating-data>Creating Sample Tenants, Namespaces, and Topics, and Generating Data</a></li><li><a href=#integrating-prometheus-with-pulsar>Integrating Prometheus with Pulsar</a></li><li><a href=#integrating-grafana-with-pulsar-and-prometheus>Integrating Grafana with Pulsar and Prometheus</a></li><li><a href=#summary>Summary</a></li></ul></nav></div></div></nav></div></div></div></div><div class="sub-footer m-5"><div class=row><div class="col-12 text-center"><a href=https://github.com/pulsar-neighborhood/pulsar-neighborhood.github.io/blob/main/content/guides/how-to-enable-observability-into-apache-pulsar.md target=_blank>Improve this page</a></div></div><div class="col-8 offset-2"><hr class="bg-primary text-primary"></div><div class="sub-footer-inner mt-2"><div><div class=mb-1>Pulsar Neighborhood</div><div><ul><li style=width:40px><a href=https://github.com/pulsar-neighborhood target=_blank><img src=/svg/github-brands.svg title="Pulsar Neighborhood on GitHub" class=img-fluid></a></li><li class="ml-3 mr-1" style=width:40px><a href=https://twitter.com/pulsar_neighbor target=_blank><img src=/svg/twitter-brands.svg title="Pulsar Neighborhood on Twitter" class=img-fluid></a></li><li style=width:40px><a href=https://www.youtube.com/c/ApachePulsarNeighborhood target=_blank><img src=/svg/youtube-brands.svg title="Pulsar Neighborhood on YouTube" class=img-fluid></a></li><li style=width:40px><a href=https://datastudio.google.com/reporting/743d9f31-c80f-4e60-b520-730631d3c250 target=_blank><img src=/png/google-analytics.png title="Pulsar Neighborhood analytics" class=img-fluid></a></li></ul></div></div><div class=p-5></div><div><div class=mb-1>Apache Pulsar</div><div><ul><li style=width:40px><a href=https://pulsar.apache.org target=_blank><img src=/png/pulsar-icon.jpg title="Apache Pulsar project home" class=img-fluid></a></li><li class="ml-3 mr-1" style=width:40px><a href=https://github.com/apache-pulsar target=_blank><img src=/svg/github-brands.svg title="Apache Pulsar on GitHub" class=img-fluid></a></li><li class=mr-1 style=width:40px><a href=https://twitter.com/Apache_Pulsar target=_blank><img src=/svg/twitter-brands.svg title="Apache Pulsar on Twitter" class=img-fluid></a></li><li class=mr-1 style=width:30px><a href=https://stackoverflow.com/questions/tagged/apache-pulsar target=_blank><img src=/svg/stack-overflow-brands.svg title="Apache Pulsar on Stackoverflow" class=img-fluid></a></li><li style=width:40px><a href=https://apache-pulsar.slack.com target=_blank><img src=/svg/slack-brands.svg title="Apache Pulsar slack channel" class=img-fluid></a></li></ul></div></div></div><div class="row text-center mb-3"><div class=col-12><a class="btn btn-info" href=https://pulsar.apache.org/community/ target=_blank>Join the Pulsar community</a></div></div><div class="row text-center"><div class="col-12 text-center"><div><a href=https://github.com/pulsar-neighborhood/pulsar-neighborhood.github.io/issues/new/choose>Contact Us</a></div></div></div></div><script type=text/javascript src=/js/scripts.min.8efe3e711319c2d0a300a084134e3f3bedcb60dce21f1e0ef12767f654242b44.js></script>
<script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js integrity=sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8S9SD43SBH"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8S9SD43SBH")</script></body></html>
var summaryInclude,fuseOptions,searchQuery;show=a=>a.style.display='block',hide=a=>a.style.display='none';function search(a){show(document.querySelector('.search-loading')),fetch('/index.json').then(function(b){if(b.status!==200){console.log('Looks like there was a problem. Status Code: '+b.status);return}b.json().then(function(b){var c=new Fuse(b,fuseOptions),d=c.search(a);populateResults(d),hide(document.querySelector('.search-loading'))}).catch(function(a){console.log('Fetch Error :-S',a)})})}function param(a){return decodeURIComponent((location.search.split(a+'=')[1]||'').split('&')[0]).replace(/\+/g,' ')}function populateResults(a){var d=document.getElementById("search-query")?.value,b=document.getElementById("search-results"),c=document.getElementById("search-result-template");a.forEach(function(a,n){var d,h,i,e,j,g,k,l,m,f;console.log(a),d=c.content.cloneNode(!0),h=d.getElementById("search-result-type")??null,i=d.getElementById("search-result-date")??null,e=d.getElementById("search-result-level")??null,j=d.getElementById("search-result-title")??null,g=d.getElementById("search-result-summary")??null,k=d.getElementById("search-result-link")??null,l=d.getElementById("search-result-tags")??null,m=d.getElementById("search-result-categories")??null,f=new Date(a.item.date),h!==null&&(h.innerHTML=a.item.type),j!==null&&(j.innerHTML=a.item.title),i!==null&&(i.innerHTML="{0} {1}".format(new Intl.DateTimeFormat('en-US',{month:'short',day:'numeric'}).format(f),f.getFullYear()<(new Date).getFullYear()?', {0}'.format(f.getFullYear()):'')),e!==null&&(shouldClearNode(a.item.level)?e.parentNode.classList.add('d-none'):e.innerHTML=a.item.level),g!==null&&(g.innerHTML=a.item.summary),k!==null&&(k.href=a.item.relpermalink),a.item.tags?.forEach(b=>{var a=document.createElement('li');a.textContent=b,l?.appendChild(a)}),a.item.categories?.forEach(b=>{var a=document.createElement('li');a.textContent=b,m?.appendChild(a)}),b?.appendChild(d)})}function shouldClearNode(a){return a===void 0||a===null||a.length<1}function buildSearchQuery(){var a=param("s").trim()??null,c=param("l")?.trim().split(',').filter(Number)??[],d=param("c")?.trim().split(',').filter(String)??[],e=param("t")?.trim().split(',').filter(String)??[],b,f;return a===null&&levelFilterStr===null&&categoryFilterStr===null?null:(b=[],a!==null&&a.length>0&&(f=document.getElementById('search-query'),f!==null&&(f.value=a),b.push({title:`${a}`}),b.push({description:`${a}`}),b.push({summary:`${a}`})),c.length>0&&b.push(convertArrayToOrSearch("level",c)),d.length>0&&b.push(convertArrayToOrSearch("categories",d)),e.length>0&&b.push(convertArrayToOrSearch("tags",e)),{$and:b.filter(a=>a)})}function convertArrayToOrSearch(c,a){if(a===null||a.length<1)return null;var b=[];return a.forEach(a=>{if(a===null||a.length<1)return;b.push({[c]:`${a}`})}),{$or:b}}summaryInclude=60,fuseOptions={shouldSort:!0,includeMatches:!0,threshold:0,tokenize:!1,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,isCaseSensitive:!0,keys:[{name:"title",weight:.3},{name:"tags",weight:.3},{name:"categories",weight:.3},{name:"level",weight:.3},{name:"description",weight:.3},{name:"summary",weight:.3}]},searchQuery=buildSearchQuery(),searchQuery===null?document.getElementById('search-results').innerHTML='<p class="search-results-empty">Please enter a word or phrase above, or see <a href="/tags/">all tags</a>.</p>':search(searchQuery)
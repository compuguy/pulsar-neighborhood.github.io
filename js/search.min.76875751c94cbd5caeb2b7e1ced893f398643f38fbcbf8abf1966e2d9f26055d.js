show=e=>e.style.display="block",hide=e=>e.style.display="none";function search(e){show(document.querySelector(".search-loading")),fetch("/index.json").then(function(t){if(t.status!==200){console.log("Looks like there was a problem. Status Code: "+t.status);return}t.json().then(function(t){var n=new Fuse(t,fuseOptions),s=n.search(e);populateResults(s),hide(document.querySelector(".search-loading"))}).catch(function(e){console.log("Fetch Error :-S",e)})})}function param(e){return decodeURIComponent((location.search.split(e+"=")[1]||"").split("&")[0]).replace(/\+/g," ")}function populateResults(e){var s=document.getElementById("search-query")?.value,t=document.getElementById("search-results"),n=document.getElementById("search-result-template");e.forEach(function(e){console.log(e);var o=n.content.cloneNode(!0),r=o.getElementById("search-result-type")??null,c=o.getElementById("search-result-date")??null,i=o.getElementById("search-result-level")??null,l=o.getElementById("search-result-title")??null,d=o.getElementById("search-result-summary")??null,u=o.getElementById("search-result-link")??null,h=o.getElementById("search-result-tags")??null,m=o.getElementById("search-result-categories")??null,a=new Date(e.item.date);r!==null&&(r.innerHTML=e.item.type),l!==null&&(l.innerHTML=e.item.title),c!==null&&(c.innerHTML="{0} {1}".format(new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(a),a.getFullYear()<(new Date).getFullYear()?", {0}".format(a.getFullYear()):"")),i!==null&&(shouldClearNode(e.item.level)?i.parentNode.classList.add("d-none"):i.innerHTML=e.item.level),d!==null&&(d.innerHTML=e.item.summary),u!==null&&(u.href=e.item.relpermalink),e.item.tags?.forEach(e=>{var t=document.createElement("li");t.textContent=e,h?.appendChild(t)}),e.item.categories?.forEach(e=>{var t=document.createElement("li");t.textContent=e,m?.appendChild(t)}),t?.appendChild(o)})}function shouldClearNode(e){return e==null||e.length<1}function buildSearchQuery(){var e,n,t=param("s").trim()??null,s=param("l")?.trim().split(",").filter(Number)??[],o=param("c")?.trim().split(",").filter(String)??[],i=param("t")?.trim().split(",").filter(String)??[];return t===null&&levelFilterStr===null&&categoryFilterStr===null?null:(e=[],t!==null&&t.length>0&&(n=document.getElementById("search-query"),n!==null&&(n.value=t),e.push({title:`${t}`}),e.push({description:`${t}`}),e.push({summary:`${t}`})),s.length>0&&e.push(convertArrayToOrSearch("level",s)),o.length>0&&e.push(convertArrayToOrSearch("categories",o)),i.length>0&&e.push(convertArrayToOrSearch("tags",i)),{$and:e.filter(e=>e)})}function convertArrayToOrSearch(e,t){if(t===null||t.length<1)return null;var n=[];return t.forEach(t=>{if(t===null||t.length<1)return;n.push({[e]:`${t}`})}),{$or:n}}var summaryInclude=60,fuseOptions={shouldSort:!0,includeMatches:!0,threshold:0,tokenize:!1,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,isCaseSensitive:!0,keys:[{name:"title",weight:.3},{name:"tags",weight:.3},{name:"categories",weight:.3},{name:"level",weight:.3},{name:"description",weight:.3},{name:"summary",weight:.3}]},searchQuery=buildSearchQuery();searchQuery===null?document.getElementById("search-results").innerHTML='<p class="search-results-empty">Please enter a word or phrase above, or see <a href="/tags/">all tags</a>.</p>':search(searchQuery)
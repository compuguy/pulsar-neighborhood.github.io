var summaryInclude,fuseOptions,searchQuery;show=a=>a.style.display='block',hide=a=>a.style.display='none';function search(a){show(document.querySelector('.search-loading')),fetch('/index.json').then(function(b){if(b.status!==200){console.log('Looks like there was a problem. Status Code: '+b.status);return}b.json().then(function(b){var c=new Fuse(b,fuseOptions),d=c.search(a);populateResults(d),hide(document.querySelector('.search-loading'))}).catch(function(a){console.log('Fetch Error :-S',a)})})}function populateResults(a){var d=document.getElementById("search-query")?.value,b=document.getElementById("search-results"),c=document.getElementById("search-result-template");a.forEach(function(d,n){var a=c.content.cloneNode(!0),g=a.getElementById("search-result-type")??null,h=a.getElementById("search-result-date")??null,k=a.getElementById("search-result-level")??null,i=a.getElementById("search-result-title")??null,f=a.getElementById("search-result-summary")??null,j=a.getElementById("search-result-link")??null,l=a.getElementById("search-result-tags")??null,m=a.getElementById("search-result-categories")??null,e=new Date(d.item.date);g!==null&&(g.innerHTML=d.item.type),i!==null&&(i.innerHTML=d.item.title),h!==null&&(h.innerHTML="{0} {1}".format(new Intl.DateTimeFormat('en-US',{month:'short',day:'numeric'}).format(e),e.getFullYear()<(new Date).getFullYear()?', {0}'.format(e.getFullYear()):'')),k!==null&&(k.innerHTML=d.item.level),f!==null&&(f.innerHTML=d.item.summary),j!==null&&(j.href=d.item.permalink),d.item.tags?.forEach(b=>{var a=document.createElement('li');a.textContent=b,l?.appendChild(a)}),d.item.categories?.forEach(b=>{var a=document.createElement('li');a.textContent=b,m?.appendChild(a)}),b?.appendChild(a)})}function param(a){return decodeURIComponent((location.search.split(a+'=')[1]||'').split('&')[0]).replace(/\+/g,' ')}function buildSearchQuery(){var a=param("s").trim()??null,d=param("l")?.trim().split(',').filter(Number)??[],e=param("c")?.trim().split(',').filter(String)??[],f=param("t")?.trim().split(',').filter(String)??[],b,c;return a===null&&levelFilterStr===null&&categoryFilterStr===null?null:(b=[],a!==null&&a.length>0&&(c=document.getElementById('search-query'),c!==null&&(c.value=a),b.push({title:`${a}`}),b.push({description:`${a}`}),b.push({summary:`${a}`})),b.push(convertArrayToOrSearch("level",d)),b.push(convertArrayToOrSearch("categories",e)),b.push(convertArrayToOrSearch("tags",f)),{$and:b.filter(a=>a)})}function convertArrayToOrSearch(c,a){if(a===null||a.length<1)return null;var b=[];return a.forEach(a=>{if(a===null||a.length<1)return;b.push({[c]:`${a}`})}),{$or:b}}String.prototype.format=function(){var a=arguments;return this.replace(/{([0-9]+)}/g,function(c,b){return typeof a[b]=='undefined'?c:a[b]})},String.prototype.toCamelCase=function(a){return a.replace(/\s(.)/g,function(a){return a.toUpperCase()}).replace(/\s/g,'').replace(/^(.)/,function(a){return a.toLowerCase()})},summaryInclude=60,fuseOptions={shouldSort:!0,includeMatches:!0,threshold:0,tokenize:!1,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,isCaseSensitive:!0,keys:[{name:"title",weight:.3},{name:"tags",weight:.3},{name:"categories",weight:.3},{name:"level",weight:.3},{name:"description",weight:.3},{name:"summary",weight:.3}]},searchQuery=buildSearchQuery(),searchQuery===null?document.getElementById('search-results').innerHTML='<p class="search-results-empty">Please enter a word or phrase above, or see <a href="/tags/">all tags</a>.</p>':search(searchQuery)